{"version":3,"file":"index.js","sources":["../src/createMediaEmbedPlugin.ts","../src/transforms/insertMediaEmbed.ts"],"sourcesContent":["import { createPluginFactory } from '@udecode/plate-core';\n\nexport const ELEMENT_MEDIA_EMBED = 'media_embed';\n\n/**\n * Enables support for embeddable media such as YouTube\n * or Vimeo videos, Instagram posts and tweets or Google Maps.\n */\nexport const createMediaEmbedPlugin = createPluginFactory({\n  key: ELEMENT_MEDIA_EMBED,\n  isElement: true,\n  isVoid: true,\n  then: (editor, { type }) => ({\n    deserializeHtml: {\n      getNode: (el: HTMLElement) => {\n        const url = el.getAttribute('src');\n        if (url) {\n          return {\n            type,\n            url,\n          };\n        }\n      },\n      validNodeName: 'IFRAME',\n    },\n  }),\n});\n","import {\n  getParent,\n  insertNodes,\n  PlateEditor,\n  PlatePluginKey,\n  TElement,\n} from '@udecode/plate-core';\nimport { ELEMENT_MEDIA_EMBED } from '../createMediaEmbedPlugin';\nimport { MediaEmbedNodeData } from '../types';\n\nexport const insertMediaEmbed = (\n  editor: PlateEditor,\n  {\n    url = '',\n    key = ELEMENT_MEDIA_EMBED,\n  }: Partial<MediaEmbedNodeData> & PlatePluginKey\n): void => {\n  if (!editor.selection) return;\n  const selectionParentEntry = getParent(editor, editor.selection);\n  if (!selectionParentEntry) return;\n  const [, path] = selectionParentEntry;\n  insertNodes<TElement>(\n    editor,\n    {\n      type: key,\n      url,\n      children: [{ text: '' }],\n    },\n    { at: path }\n  );\n};\n"],"names":["ELEMENT_MEDIA_EMBED","createMediaEmbedPlugin","createPluginFactory","key","isElement","isVoid","then","editor","type","deserializeHtml","getNode","el","url","getAttribute","validNodeName","insertMediaEmbed","selection","selectionParentEntry","getParent","path","insertNodes","children","text","at"],"mappings":";;;;;;MAEaA,mBAAmB,GAAG;AAEnC;AACA;AACA;AACA;;MACaC,sBAAsB,GAAGC,6BAAmB,CAAC;AACxDC,EAAAA,GAAG,EAAEH,mBADmD;AAExDI,EAAAA,SAAS,EAAE,IAF6C;AAGxDC,EAAAA,MAAM,EAAE,IAHgD;AAIxDC,EAAAA,IAAI,EAAE,CAACC,MAAD,EAAS;AAAEC,IAAAA;AAAF,GAAT,MAAuB;AAC3BC,IAAAA,eAAe,EAAE;AACfC,MAAAA,OAAO,EAAGC,EAAD,IAAqB;AAC5B,cAAMC,GAAG,GAAGD,EAAE,CAACE,YAAH,CAAgB,KAAhB,CAAZ;;AACA,YAAID,GAAJ,EAAS;AACP,iBAAO;AACLJ,YAAAA,IADK;AAELI,YAAAA;AAFK,WAAP;AAID;AACF,OATc;AAUfE,MAAAA,aAAa,EAAE;AAVA;AADU,GAAvB;AAJkD,CAAD;;MCE5CC,gBAAgB,GAAG,CAC9BR,MAD8B,EAE9B;AACEK,EAAAA,GAAG,GAAG,EADR;AAEET,EAAAA,GAAG,GAAGH;AAFR,CAF8B,KAMrB;AACT,MAAI,CAACO,MAAM,CAACS,SAAZ,EAAuB;AACvB,QAAMC,oBAAoB,GAAGC,mBAAS,CAACX,MAAD,EAASA,MAAM,CAACS,SAAhB,CAAtC;AACA,MAAI,CAACC,oBAAL,EAA2B;AAC3B,QAAM,GAAGE,IAAH,IAAWF,oBAAjB;AACAG,EAAAA,qBAAW,CACTb,MADS,EAET;AACEC,IAAAA,IAAI,EAAEL,GADR;AAEES,IAAAA,GAFF;AAGES,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD;AAHZ,GAFS,EAOT;AAAEC,IAAAA,EAAE,EAAEJ;AAAN,GAPS,CAAX;AASD;;;;;;"}