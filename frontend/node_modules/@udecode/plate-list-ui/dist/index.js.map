{"version":3,"file":"index.js","sources":["../src/ListToolbarButton/ListToolbarButton.tsx","../src/TodoListElement/TodoListElement.styles.ts","../../../../node_modules/clsx/dist/clsx.m.js","../src/TodoListElement/TodoListElement.tsx"],"sourcesContent":["import React from 'react';\nimport {\n  getPreventDefaultHandler,\n  usePlateEditorState,\n} from '@udecode/plate-core';\nimport { ELEMENT_UL, getListItemEntry, toggleList } from '@udecode/plate-list';\nimport { BlockToolbarButton, ToolbarButtonProps } from '@udecode/plate-toolbar';\n\nexport const ListToolbarButton = ({\n  type = ELEMENT_UL,\n  ...props\n}: ToolbarButtonProps & { type?: string }) => {\n  const editor = usePlateEditorState()!;\n\n  const res = !!editor?.selection && getListItemEntry(editor);\n\n  return (\n    <BlockToolbarButton\n      active={!!res && res.list[0].type === type}\n      type={type}\n      onMouseDown={\n        editor &&\n        getPreventDefaultHandler(toggleList, editor, {\n          type,\n        })\n      }\n      {...props}\n    />\n  );\n};\n","import { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { TodoListElementStyleProps } from './TodoListElement.types';\n\nexport const getTodoListElementStyles = (props: TodoListElementStyleProps) => {\n  return createStyles(\n    { prefixClassNames: 'TodoListElement', ...props },\n    {\n      root: tw`flex flex-row py-1`,\n      ...(props.checked && { rootChecked: {} }),\n      checkboxWrapper: tw`flex items-center justify-center select-none mr-1.5`,\n      checkbox: tw`w-4 h-4 m-0`,\n      text: [\n        tw`flex-1 focus:outline-none`,\n        props.checked && tw`line-through opacity[0.666]`,\n      ],\n    }\n  );\n};\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import React from 'react';\nimport { setNodes, TElement } from '@udecode/plate-core';\nimport { TodoListItemNodeData } from '@udecode/plate-list';\nimport { getRootProps } from '@udecode/plate-styled-components';\nimport clsx from 'clsx';\nimport { ReactEditor, useReadOnly } from 'slate-react';\nimport { getTodoListElementStyles } from './TodoListElement.styles';\nimport { TodoListElementProps } from './TodoListElement.types';\n\nexport const TodoListElement = (props: TodoListElementProps) => {\n  const { attributes, children, nodeProps, element, editor } = props;\n\n  const rootProps = getRootProps(props);\n\n  const readOnly = useReadOnly();\n\n  const { checked } = element;\n\n  const styles = getTodoListElementStyles({ ...props, checked });\n\n  return (\n    <div\n      {...attributes}\n      css={styles.root.css}\n      {...rootProps}\n      className={clsx(\n        styles.root.className,\n        styles.rootChecked?.className,\n        rootProps?.className\n      )}\n    >\n      <div\n        contentEditable={false}\n        css={styles.checkboxWrapper?.css}\n        className={styles.checkboxWrapper?.className}\n      >\n        <input\n          data-testid=\"TodoListElementCheckbox\"\n          css={styles.checkbox?.css}\n          className={styles.checkbox?.className}\n          type=\"checkbox\"\n          checked={!!checked}\n          onChange={(e) => {\n            const path = ReactEditor.findPath(editor, element);\n\n            setNodes<TElement<TodoListItemNodeData>>(\n              editor,\n              { checked: e.target.checked },\n              {\n                at: path,\n              }\n            );\n          }}\n          {...nodeProps}\n        />\n      </div>\n      <span\n        css={styles.text?.css}\n        className={styles.text?.className}\n        contentEditable={!readOnly}\n        suppressContentEditableWarning\n      >\n        {children}\n      </span>\n    </div>\n  );\n};\n"],"names":["ListToolbarButton","type","ELEMENT_UL","props","editor","usePlateEditorState","res","selection","getListItemEntry","React","BlockToolbarButton","list","getPreventDefaultHandler","toggleList","getTodoListElementStyles","createStyles","prefixClassNames","root","checked","rootChecked","checkboxWrapper","checkbox","text","TodoListElement","attributes","children","nodeProps","element","rootProps","getRootProps","readOnly","useReadOnly","styles","clsx","className","css","e","path","ReactEditor","findPath","setNodes","target","at"],"mappings":"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"}