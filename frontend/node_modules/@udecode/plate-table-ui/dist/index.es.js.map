{"version":3,"file":"index.es.js","sources":["../src/table.atoms.ts","../src/TableCellElement/TableCellElement.styles.ts","../../../../node_modules/clsx/dist/clsx.m.js","../src/TableCellElement/TableCellElement.tsx","../src/TableElement/TableElement.styles.ts","../src/hooks/useTableColSizes.ts","../src/TablePopover/TablePopover.tsx","../src/TableElement/TableElement.tsx","../src/TableRowElement/TableRowElement.styles.ts","../src/TableRowElement/TableRowElement.tsx","../src/TableToolbarButton/TableToolbarButton.tsx"],"sourcesContent":["import { atom } from 'jotai';\n\nexport const hoveredColIndexAtom = atom<number | null>(null);\n\nexport const resizingColAtom = atom<{ index: number; width: number } | null>(\n  null\n);\n","import { createStyles } from '@udecode/plate-styled-components';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\nimport { TableCellElementStyleProps } from './TableCellElement.types';\n\nexport const getTableCellElementStyles = (\n  props: TableCellElementStyleProps\n) => {\n  const { hovered, hideBorder } = props;\n\n  return createStyles(\n    { prefixClassNames: 'TableCellElement', ...props },\n    {\n      root: [\n        tw`relative p-0 overflow-visible bg-white`,\n        hideBorder ? tw`border-none` : tw`border border-gray-300`,\n        css`\n          min-width: 48px;\n        `,\n      ],\n      content: tw`relative px-3 py-2 z-10`,\n      resizableWrapper: [tw`absolute w-full h-full top-0`],\n      handle: [\n        tw`absolute`,\n        hovered && tw`bg-blue-500`,\n        css`\n          top: -12px;\n          right: -2px;\n\n          width: 4px;\n          height: calc(100% + 12px);\n\n          z-index: 10;\n        `,\n      ],\n    }\n  );\n};\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import React, { useMemo } from 'react';\nimport { getRootProps } from '@udecode/plate-styled-components';\nimport {\n  ELEMENT_TABLE,\n  getTableColumnIndex,\n  setTableColSize,\n} from '@udecode/plate-table';\nimport clsx from 'clsx';\nimport { useAtom } from 'jotai';\nimport { Resizable, ResizableProps } from 're-resizable';\nimport { ReactEditor } from 'slate-react';\nimport { hoveredColIndexAtom, resizingColAtom } from '../table.atoms';\nimport { getTableCellElementStyles } from './TableCellElement.styles';\nimport { TableCellElementProps } from './TableCellElement.types';\n\nexport const TableCellElement = (props: TableCellElementProps) => {\n  const {\n    attributes,\n    children,\n    nodeProps,\n    element,\n    resizableProps,\n    editor,\n  } = props;\n\n  const rootProps = getRootProps(props);\n\n  const [hoveredColIndex, setHoveredColIndex] = useAtom(\n    hoveredColIndexAtom,\n    ELEMENT_TABLE\n  );\n  const [, setResizingCol] = useAtom(resizingColAtom, ELEMENT_TABLE);\n\n  const colIndex = useMemo(\n    () => getTableColumnIndex(editor, { node: element }),\n    [editor, element]\n  );\n\n  const {\n    root,\n    content,\n    resizableWrapper,\n    resizable,\n    handle,\n  } = getTableCellElementStyles({\n    ...props,\n    hovered: hoveredColIndex === colIndex,\n  });\n\n  const onResize: ResizableProps['onResize'] = (e, direction, ref) => {\n    setResizingCol({\n      index: colIndex,\n      width: ref.offsetWidth,\n    });\n  };\n\n  const onResizeStop: ResizableProps['onResizeStop'] = (e, direction, ref) => {\n    setTableColSize(\n      editor,\n      { colIndex, width: ref.offsetWidth },\n      { at: ReactEditor.findPath(editor, element) }\n    );\n\n    setResizingCol(null);\n  };\n\n  return (\n    <td\n      {...attributes}\n      css={root.css}\n      className={root.className}\n      {...rootProps}\n      {...nodeProps}\n    >\n      <div css={content?.css} className={content?.className}>\n        {children}\n      </div>\n\n      <div\n        css={resizableWrapper?.css}\n        className={clsx(resizableWrapper?.className, 'group')}\n        contentEditable={false}\n        onMouseOver={() => setHoveredColIndex(colIndex)}\n        onFocus={() => setHoveredColIndex(colIndex)}\n        onMouseOut={() => setHoveredColIndex(null)}\n        onBlur={() => setHoveredColIndex(null)}\n      >\n        <Resizable\n          // @ts-ignore\n          css={resizable?.css}\n          className={resizable?.className}\n          size={{ width: '100%', height: '100%' }}\n          enable={{ right: true }}\n          handleStyles={{\n            right: {\n              top: -12,\n              height: 'calc(100% + 12px)',\n              zIndex: 20,\n            },\n          }}\n          onResize={onResize}\n          onResizeStop={onResizeStop}\n          {...resizableProps}\n        />\n\n        <div css={handle?.css} className={handle?.className} />\n      </div>\n    </td>\n  );\n};\n","import { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { TableElementStyleProps } from './TableElement.types';\n\nexport const getTableElementStyles = (props: TableElementStyleProps) =>\n  createStyles(\n    { prefixClassNames: 'TableElement', ...props },\n    {\n      root: [tw`table w-full my-4 mx-0 border-collapse`],\n      tbody: tw`min-w-full`,\n    }\n  );\n","import { TElement } from '@udecode/plate-core';\nimport {\n  ELEMENT_TABLE,\n  getTableColumnCount,\n  TableNodeData,\n} from '@udecode/plate-table';\nimport { useAtom } from 'jotai';\nimport { resizingColAtom } from '../table.atoms';\n\nexport const useTableColSizes = (\n  tableNode: TElement<TableNodeData>\n): number[] => {\n  const [resizingCol] = useAtom(resizingColAtom, ELEMENT_TABLE);\n\n  const colCount = getTableColumnCount(tableNode);\n\n  const colSizes = tableNode.colSizes\n    ? [...tableNode.colSizes]\n    : Array(colCount);\n\n  if (resizingCol) {\n    colSizes[resizingCol.index ?? 0] = resizingCol.width;\n  }\n\n  return colSizes;\n};\n","import React from 'react';\nimport { RemoveNodeButton } from '@udecode/plate-ui-button';\nimport { Popover } from '@udecode/plate-ui-popover';\nimport { TableElementProps } from '../TableElement/TableElement.types';\n\nexport const TablePopover = ({\n  element,\n  popoverProps,\n  children,\n}: TableElementProps) => (\n  <Popover content={<RemoveNodeButton element={element} />} {...popoverProps}>\n    {children}\n  </Popover>\n);\n","import React from 'react';\nimport { withProviders } from '@udecode/plate-core';\nimport { getRootProps } from '@udecode/plate-styled-components';\nimport { ELEMENT_TABLE } from '@udecode/plate-table';\nimport { Provider } from 'jotai';\nimport { useTableColSizes } from '../hooks/useTableColSizes';\nimport { TablePopover } from '../TablePopover/TablePopover';\nimport { getTableElementStyles } from './TableElement.styles';\nimport { TableElementProps } from './TableElement.types';\n\nexport const TableElementBase = (props: TableElementProps) => {\n  const {\n    attributes,\n    children,\n    nodeProps,\n    element,\n    transformColSizes,\n    onRenderContainer: Popover = TablePopover,\n  } = props;\n\n  const rootProps = getRootProps(props);\n\n  const { root, tbody } = getTableElementStyles(props);\n\n  let colSizes = useTableColSizes(element);\n\n  if (transformColSizes) {\n    colSizes = transformColSizes(colSizes);\n  }\n\n  return (\n    <Popover {...props}>\n      <table\n        {...attributes}\n        css={root.css}\n        className={root.className}\n        {...rootProps}\n        {...nodeProps}\n      >\n        <colgroup>\n          {colSizes.map((width, index) => (\n            <col key={index} style={width ? { width } : undefined} />\n          ))}\n        </colgroup>\n        <tbody css={tbody?.css} className={tbody?.className}>\n          {children}\n        </tbody>\n      </table>\n    </Popover>\n  );\n};\n\nexport const TableElement = withProviders([Provider, { scope: ELEMENT_TABLE }])(\n  TableElementBase\n);\n","import { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { TableRowElementStyleProps } from './TableRowElement.types';\n\nexport const getTableRowElementStyles = (props: TableRowElementStyleProps) =>\n  createStyles(\n    { prefixClassNames: 'TableRowElement', ...props },\n    {\n      root: [props.hideBorder && tw`border-none`],\n    }\n  );\n","import React from 'react';\nimport { getRootProps } from '@udecode/plate-styled-components';\nimport { getTableRowElementStyles } from './TableRowElement.styles';\nimport { TableRowElementProps } from './TableRowElement.types';\n\nexport const TableRowElement = (props: TableRowElementProps) => {\n  const { attributes, children, nodeProps } = props;\n\n  const rootProps = getRootProps(props);\n  const { root } = getTableRowElementStyles(props);\n\n  return (\n    <tr\n      {...attributes}\n      css={root.css}\n      className={root.className}\n      {...rootProps}\n      {...nodeProps}\n    >\n      {children}\n    </tr>\n  );\n};\n","import React from 'react';\nimport {\n  getPluginType,\n  getPreventDefaultHandler,\n  someNode,\n  usePlateEditorState,\n} from '@udecode/plate-core';\nimport { ELEMENT_TABLE } from '@udecode/plate-table';\nimport { ToolbarButton } from '@udecode/plate-toolbar';\nimport { TableToolbarButtonProps } from './TableToolbarButton.types';\n\nexport const TableToolbarButton = ({\n  transform,\n  header,\n  ...props\n}: TableToolbarButtonProps) => {\n  const editor = usePlateEditorState()!;\n  const type = getPluginType(editor, ELEMENT_TABLE);\n\n  return (\n    <ToolbarButton\n      active={\n        !!editor?.selection &&\n        someNode(editor, {\n          match: { type },\n        })\n      }\n      onMouseDown={\n        !!type && editor\n          ? getPreventDefaultHandler(transform, editor, { header })\n          : undefined\n      }\n      {...props}\n    />\n  );\n};\n"],"names":["hoveredColIndexAtom","atom","resizingColAtom","getTableCellElementStyles","props","hovered","hideBorder","createStyles","prefixClassNames","root","css","content","resizableWrapper","handle","TableCellElement","attributes","children","nodeProps","element","resizableProps","editor","rootProps","getRootProps","hoveredColIndex","setHoveredColIndex","useAtom","ELEMENT_TABLE","setResizingCol","colIndex","useMemo","getTableColumnIndex","node","resizable","onResize","e","direction","ref","index","width","offsetWidth","onResizeStop","setTableColSize","at","ReactEditor","findPath","className","clsx","height","right","top","zIndex","getTableElementStyles","tbody","useTableColSizes","tableNode","resizingCol","colCount","getTableColumnCount","colSizes","Array","TablePopover","popoverProps","TableElementBase","transformColSizes","onRenderContainer","Popover","map","undefined","TableElement","withProviders","Provider","scope","getTableRowElementStyles","TableRowElement","TableToolbarButton","transform","header","usePlateEditorState","type","getPluginType","selection","someNode","match","getPreventDefaultHandler"],"mappings":"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"}