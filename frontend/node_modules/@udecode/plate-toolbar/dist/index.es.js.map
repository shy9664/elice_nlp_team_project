{"version":3,"file":"index.es.js","sources":["../src/Toolbar/Toolbar.styles.ts","../src/BalloonToolbar/BalloonToolbar.styles.ts","../src/Toolbar/Toolbar.tsx","../src/BalloonToolbar/useBalloonToolbarPopper.ts","../src/BalloonToolbar/BalloonToolbar.tsx","../src/ToolbarButton/ToolbarButton.styles.ts","../../../../node_modules/clsx/dist/clsx.m.js","../src/ToolbarButton/ToolbarButton.tsx","../src/BlockToolbarButton/BlockToolbarButton.tsx","../src/HeadingToolbar/HeadingToolbar.styles.ts","../src/HeadingToolbar/HeadingToolbar.tsx","../src/MarkToolbarButton/MarkToolbarButton.tsx","../src/ToolbarDropdown/ToolbarDropdown.tsx"],"sourcesContent":["import { createStyles } from '@udecode/plate-styled-components';\nimport tw from 'twin.macro';\nimport { ToolbarProps } from './Toolbar.types';\n\nexport const getToolbarStyles = (props: ToolbarProps) =>\n  createStyles(\n    { prefixClassNames: 'Toolbar', ...props },\n    {\n      root: [\n        tw`flex items-center select-none box-content`,\n        tw`color[rgb(68, 68, 68)] minHeight[40px]`,\n      ],\n    }\n  );\n","import { createStyles } from '@udecode/plate-styled-components';\nimport { css, CSSProp } from 'styled-components';\nimport tw from 'twin.macro';\nimport { getToolbarStyles } from '../Toolbar/Toolbar.styles';\nimport { BalloonToolbarStyleProps } from './BalloonToolbar.types';\n\nexport const getBalloonToolbarStyles = (props: BalloonToolbarStyleProps) => {\n  let color = 'rgb(157, 170, 182)';\n  let colorActive = 'white';\n  let background = 'rgb(36, 42, 49)';\n  let borderColor = 'transparent';\n\n  if (props.theme === 'light') {\n    color = 'rgba(0, 0, 0, 0.50)';\n    colorActive = 'black';\n    background = 'rgb(250, 250, 250)';\n    borderColor = 'rgb(196, 196, 196)';\n  }\n\n  const { placement = 'top' } = props.popperOptions ?? {};\n\n  const arrowStyle: CSSProp = [\n    props.arrow &&\n      css`\n        ::after {\n          left: 50%;\n          content: ' ';\n          position: absolute;\n          margin-top: -1px;\n          transform: translateX(-50%);\n          border-color: ${background} transparent;\n          border-style: solid;\n        }\n      `,\n\n    props.arrow &&\n      placement.includes('top') &&\n      css`\n        ::after {\n          top: 100%;\n          bottom: auto;\n          border-width: 8px 8px 0;\n        }\n      `,\n\n    props.arrow &&\n      !placement.includes('top') &&\n      css`\n        ::after {\n          top: auto;\n          bottom: 100%;\n          border-width: 0 8px 8px;\n        }\n      `,\n  ];\n\n  const arrowBorderStyle: CSSProp = [\n    props.arrow &&\n      placement.includes('top') &&\n      props.theme === 'light' &&\n      css`\n        ::before {\n          margin-top: 0;\n          border-width: 9px 9px 0;\n          border-color: ${borderColor} transparent;\n        }\n      `,\n    props.arrow &&\n      !placement.includes('top') &&\n      props.theme === 'light' &&\n      css`\n        ::before {\n          margin-top: 0;\n          border-width: 0 9px 9px;\n          border-color: ${borderColor} transparent;\n        }\n      `,\n  ];\n\n  return createStyles(\n    { prefixClassNames: 'BalloonToolbar', ...props },\n    {\n      root: [\n        ...getToolbarStyles(props).root.css,\n        tw`absolute whitespace-nowrap opacity-100 transition[opacity .2s ease-in-out]`,\n        css`\n          color: ${color};\n          background: ${background};\n          z-index: 500;\n          border: 1px solid ${borderColor};\n          border-radius: 4px;\n\n          .slate-ToolbarButton-active,\n          .slate-ToolbarButton:hover {\n            color: ${colorActive};\n          }\n\n          ::before {\n            ${arrowBorderStyle}\n          }\n        `,\n        ...arrowStyle,\n        ...arrowBorderStyle,\n      ],\n    }\n  );\n};\n","import React from 'react';\nimport { getToolbarStyles } from './Toolbar.styles';\nimport { ToolbarProps } from './Toolbar.types';\n\nexport const ToolbarBase = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  (props, ref) => {\n    return <div data-testid=\"Toolbar\" ref={ref} {...props} />;\n  }\n);\n\nexport const Toolbar = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  (props: ToolbarProps, ref) => {\n    const { root } = getToolbarStyles(props);\n\n    return (\n      <ToolbarBase\n        {...props}\n        ref={ref}\n        css={root.css}\n        className={root.className}\n      />\n    );\n  }\n);\n","import { useCallback, useEffect, useState } from 'react';\nimport {\n  getSelectionText,\n  isSelectionExpanded,\n  usePlateEditorState,\n} from '@udecode/plate-core';\nimport {\n  getSelectionBoundingClientRect,\n  usePopperPosition,\n  UsePopperPositionOptions,\n} from '@udecode/plate-popper';\n\nexport const useBalloonToolbarPopper = (options: UsePopperPositionOptions) => {\n  const editor = usePlateEditorState()!;\n\n  const [isHidden, setIsHidden] = useState(true);\n\n  const selectionExpanded = editor && isSelectionExpanded(editor);\n  const selectionText = editor && getSelectionText(editor);\n\n  const show = useCallback(() => {\n    if (isHidden && selectionExpanded) {\n      setIsHidden(false);\n    }\n  }, [isHidden, selectionExpanded]);\n\n  useEffect(() => {\n    if (!selectionText) {\n      setIsHidden(true);\n    } else if (selectionText && selectionExpanded) {\n      setIsHidden(false);\n    }\n  }, [selectionExpanded, selectionText, show]);\n\n  const popperResult = usePopperPosition({\n    isHidden,\n    getBoundingClientRect: getSelectionBoundingClientRect,\n    ...options,\n  });\n\n  const selectionTextLength = selectionText?.length ?? 0;\n  const { update } = popperResult;\n\n  useEffect(() => {\n    selectionTextLength > 0 && update?.();\n  }, [selectionTextLength, update]);\n\n  return popperResult;\n};\n","import React, { useRef } from 'react';\nimport { UsePopperPositionOptions } from '@udecode/plate-popper';\nimport { PortalBody } from '@udecode/plate-styled-components';\nimport { ToolbarBase } from '../Toolbar/Toolbar';\nimport { getBalloonToolbarStyles } from './BalloonToolbar.styles';\nimport { BalloonToolbarProps } from './BalloonToolbar.types';\nimport { useBalloonToolbarPopper } from './useBalloonToolbarPopper';\n\nexport const BalloonToolbar = (props: BalloonToolbarProps) => {\n  const {\n    children,\n    theme = 'dark',\n    arrow = false,\n    portalElement,\n    popperOptions: _popperOptions = {},\n  } = props;\n\n  const popperRef = useRef<HTMLDivElement>(null);\n\n  const popperOptions: UsePopperPositionOptions = {\n    popperElement: popperRef.current,\n    placement: 'top' as any,\n    offset: [0, 8],\n    ..._popperOptions,\n  };\n\n  const { styles: popperStyles, attributes } = useBalloonToolbarPopper(\n    popperOptions\n  );\n\n  const styles = getBalloonToolbarStyles({\n    popperOptions,\n    theme,\n    arrow,\n    ...props,\n  });\n\n  return (\n    <PortalBody element={portalElement}>\n      <ToolbarBase\n        ref={popperRef}\n        css={styles.root.css}\n        className={styles.root.className}\n        style={popperStyles.popper}\n        {...attributes.popper}\n      >\n        {children}\n      </ToolbarBase>\n    </PortalBody>\n  );\n};\n","import { createStyles } from '@udecode/plate-styled-components';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\nimport { ToolbarButtonProps } from './ToolbarButton.types';\n\nexport const getToolbarButtonStyles = (props: ToolbarButtonProps) =>\n  createStyles(\n    { prefixClassNames: 'ToolbarButton', ...props },\n    {\n      root: [\n        tw`flex justify-center items-center select-none cursor-pointer align-middle`,\n        tw`width[28px] height[24px]`,\n        css`\n          > svg {\n            ${tw`block w-5 h-5`}\n          }\n        `,\n      ],\n      ...(props.active && { active: {} }),\n    }\n  );\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","import React from 'react';\nimport Tippy, { TippyProps } from '@tippyjs/react'; // optional\nimport clsx from 'clsx';\nimport { getToolbarButtonStyles } from './ToolbarButton.styles';\nimport { ToolbarButtonProps } from './ToolbarButton.types';\n\nexport const ToolbarButton = (props: ToolbarButtonProps) => {\n  const { icon, tooltip, onMouseDown, as = 'span' } = props;\n\n  const spanProps = {\n    onMouseDown,\n  };\n\n  const tooltipProps: TippyProps = {\n    content: '',\n    arrow: true,\n    offset: [0, 17],\n    delay: 0,\n    duration: [200, 0],\n    hideOnClick: false,\n    ...tooltip,\n  };\n\n  const { root, active } = getToolbarButtonStyles(props);\n\n  const button = (\n    <span\n      data-testid=\"ToolbarButton\"\n      as={as}\n      css={root.css}\n      className={clsx(root.className, active?.className)}\n      {...spanProps}\n    >\n      {icon}\n    </span>\n  );\n\n  return tooltip ? <Tippy {...tooltipProps}>{button}</Tippy> : button;\n};\n","import React from 'react';\nimport {\n  getPreventDefaultHandler,\n  someNode,\n  toggleNodeType,\n  usePlateEditorState,\n} from '@udecode/plate-core';\nimport { ToolbarButton } from '../ToolbarButton';\nimport { BlockToolbarButtonProps } from './BlockToolbarButton.types';\n\n/**\n * Toolbar button to toggle the type of elements in selection.\n */\nexport const BlockToolbarButton = ({\n  type,\n  inactiveType,\n  active,\n  ...props\n}: BlockToolbarButtonProps) => {\n  const editor = usePlateEditorState()!;\n\n  return (\n    <ToolbarButton\n      active={\n        active ?? (!!editor?.selection && someNode(editor, { match: { type } }))\n      }\n      onMouseDown={\n        editor &&\n        getPreventDefaultHandler(toggleNodeType, editor, {\n          activeType: type,\n          inactiveType,\n        })\n      }\n      {...props}\n    />\n  );\n};\n","import { createStyles, StyledProps } from '@udecode/plate-styled-components';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\nimport { getToolbarStyles } from '../Toolbar/Toolbar.styles';\n\nexport const getHeadingToolbarStyles = (props: StyledProps) =>\n  createStyles({ prefixClassNames: 'HeadingToolbar', ...props }, [\n    {\n      root: [\n        ...getToolbarStyles(props).root.css,\n        tw`relative flex-wrap mt-0 mb-5 -mx-5`,\n        css`\n          padding: 1px 18px 17px;\n          border-bottom: 2px solid #eee;\n\n          .slate-ToolbarButton-active,\n          .slate-ToolbarButton:hover {\n            color: #06c;\n          }\n        `,\n      ],\n    },\n  ]);\n","import React from 'react';\nimport { ToolbarBase } from '../Toolbar/Toolbar';\nimport { ToolbarProps } from '../Toolbar/Toolbar.types';\nimport { getHeadingToolbarStyles } from './HeadingToolbar.styles';\n\nexport const HeadingToolbar = React.forwardRef<HTMLDivElement, ToolbarProps>(\n  (props: ToolbarProps, ref) => {\n    const styles = getHeadingToolbarStyles(props);\n\n    return (\n      <ToolbarBase\n        ref={ref}\n        className={styles.root.className}\n        css={styles.root.css}\n        {...props}\n      />\n    );\n  }\n);\n","import React from 'react';\nimport {\n  getPreventDefaultHandler,\n  isMarkActive,\n  toggleMark,\n  usePlateEditorState,\n} from '@udecode/plate-core';\nimport { ToolbarButton } from '../ToolbarButton/ToolbarButton';\nimport { MarkToolbarButtonProps } from './MarkToolbarButton.types';\n\n/**\n * Toolbar button to toggle the mark of the leaves in selection.\n */\nexport const MarkToolbarButton = ({\n  type,\n  clear,\n  ...props\n}: MarkToolbarButtonProps) => {\n  const editor = usePlateEditorState()!;\n\n  return (\n    <ToolbarButton\n      active={!!editor?.selection && isMarkActive(editor, type!)}\n      onMouseDown={\n        editor\n          ? getPreventDefaultHandler(toggleMark, editor, { key: type, clear })\n          : undefined\n      }\n      {...props}\n    />\n  );\n};\n","import React, { ReactNode, useEffect, useState } from 'react';\nimport { css } from 'styled-components';\nimport tw from 'twin.macro';\n\ntype ToolbarDropdownProps = {\n  control: ReactNode;\n  open: boolean;\n  children: ReactNode;\n  onOpen?: () => void;\n  onClose?: (ev: MouseEvent) => void;\n};\n\nexport const ToolbarDropdown = ({\n  control,\n  children,\n  open,\n  onOpen,\n  onClose,\n}: ToolbarDropdownProps) => {\n  const [\n    referenceElement,\n    setReferenceElement,\n  ] = useState<HTMLDivElement | null>(null);\n  const [popperElement, setPopperElement] = useState<HTMLDivElement | null>(\n    null\n  );\n\n  useEffect(() => {\n    const listener = (ev: MouseEvent) => {\n      if (open) {\n        if (referenceElement && ev.composedPath().includes(referenceElement)) {\n          return;\n        }\n        if (popperElement && ev.composedPath().includes(popperElement)) {\n          return;\n        }\n\n        onClose?.(ev);\n      }\n    };\n    document.body.addEventListener('mousedown', listener);\n    return () => {\n      document.body.removeEventListener('mousedown', listener);\n    };\n  }, [onClose, open, popperElement, referenceElement]);\n\n  return (\n    <>\n      <div ref={setReferenceElement} onMouseDown={onOpen}>\n        {control}\n      </div>\n\n      <div\n        ref={setPopperElement}\n        css={[\n          tw`absolute bg-white top-10`,\n          !open && tw`hidden`,\n          css`\n            border: 1px solid #ccc;\n            box-shadow: 0 1px 3px 0 #ccc;\n            z-index: 1;\n          `,\n        ]}\n      >\n        {children}\n      </div>\n    </>\n  );\n};\n"],"names":["getToolbarStyles","props","createStyles","prefixClassNames","root","getBalloonToolbarStyles","color","colorActive","background","borderColor","theme","placement","popperOptions","arrowStyle","arrow","css","includes","arrowBorderStyle","ToolbarBase","React","forwardRef","ref","Toolbar","className","useBalloonToolbarPopper","options","editor","usePlateEditorState","isHidden","setIsHidden","useState","selectionExpanded","isSelectionExpanded","selectionText","getSelectionText","show","useCallback","useEffect","popperResult","usePopperPosition","getBoundingClientRect","getSelectionBoundingClientRect","selectionTextLength","length","update","BalloonToolbar","children","portalElement","_popperOptions","popperRef","useRef","popperElement","current","offset","styles","popperStyles","attributes","popper","getToolbarButtonStyles","active","ToolbarButton","icon","tooltip","onMouseDown","as","spanProps","tooltipProps","content","delay","duration","hideOnClick","button","clsx","BlockToolbarButton","type","inactiveType","selection","someNode","match","getPreventDefaultHandler","toggleNodeType","activeType","getHeadingToolbarStyles","HeadingToolbar","MarkToolbarButton","clear","isMarkActive","toggleMark","key","undefined","ToolbarDropdown","control","open","onOpen","onClose","referenceElement","setReferenceElement","setPopperElement","listener","ev","composedPath","document","body","addEventListener","removeEventListener"],"mappings":"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"}