{"version":3,"file":"index.js","sources":["../src/decorateFindReplace.ts","../src/createFindReplacePlugin.ts"],"sourcesContent":["import { Decorate } from '@udecode/plate-core';\nimport { NodeEntry, Range, Text } from 'slate';\nimport { FindReplacePlugin } from './types';\n\nexport const decorateFindReplace: Decorate<{}, FindReplacePlugin> = (\n  editor,\n  { type, options: { search } }\n) => ([node, path]: NodeEntry) => {\n  const ranges: Range[] = [];\n\n  if (search && Text.isText(node)) {\n    const { text } = node;\n    const parts = text.split(search);\n    let offset = 0;\n    parts.forEach((part, i) => {\n      if (i !== 0) {\n        ranges.push({\n          anchor: { path, offset: offset - search.length },\n          focus: { path, offset },\n          [type]: true,\n        });\n      }\n      offset = offset + part.length + search.length;\n    });\n  }\n\n  return ranges;\n};\n","import { createPluginFactory } from '@udecode/plate-core';\nimport { decorateFindReplace } from './decorateFindReplace';\nimport { FindReplacePlugin } from './types';\n\nexport const MARK_SEARCH_HIGHLIGHT = 'search_highlight';\n\nexport const createFindReplacePlugin = createPluginFactory<FindReplacePlugin>({\n  key: MARK_SEARCH_HIGHLIGHT,\n  isLeaf: true,\n  decorate: decorateFindReplace,\n});\n"],"names":["decorateFindReplace","editor","type","options","search","node","path","ranges","Text","isText","text","parts","split","offset","forEach","part","i","push","anchor","length","focus","MARK_SEARCH_HIGHLIGHT","createFindReplacePlugin","createPluginFactory","key","isLeaf","decorate"],"mappings":";;;;;;;MAIaA,mBAAoD,GAAG,CAClEC,MADkE,EAElE;AAAEC,EAAAA,IAAF;AAAQC,EAAAA,OAAO,EAAE;AAAEC,IAAAA;AAAF;AAAjB,CAFkE,KAG/D,CAAC,CAACC,IAAD,EAAOC,IAAP,CAAD,KAA6B;AAChC,QAAMC,MAAe,GAAG,EAAxB;;AAEA,MAAIH,MAAM,IAAII,UAAI,CAACC,MAAL,CAAYJ,IAAZ,CAAd,EAAiC;AAC/B,UAAM;AAAEK,MAAAA;AAAF,QAAWL,IAAjB;AACA,UAAMM,KAAK,GAAGD,IAAI,CAACE,KAAL,CAAWR,MAAX,CAAd;AACA,QAAIS,MAAM,GAAG,CAAb;AACAF,IAAAA,KAAK,CAACG,OAAN,CAAc,CAACC,IAAD,EAAOC,CAAP,KAAa;AACzB,UAAIA,CAAC,KAAK,CAAV,EAAa;AACXT,QAAAA,MAAM,CAACU,IAAP,CAAY;AACVC,UAAAA,MAAM,EAAE;AAAEZ,YAAAA,IAAF;AAAQO,YAAAA,MAAM,EAAEA,MAAM,GAAGT,MAAM,CAACe;AAAhC,WADE;AAEVC,UAAAA,KAAK,EAAE;AAAEd,YAAAA,IAAF;AAAQO,YAAAA;AAAR,WAFG;AAGV,WAACX,IAAD,GAAQ;AAHE,SAAZ;AAKD;;AACDW,MAAAA,MAAM,GAAGA,MAAM,GAAGE,IAAI,CAACI,MAAd,GAAuBf,MAAM,CAACe,MAAvC;AACD,KATD;AAUD;;AAED,SAAOZ,MAAP;AACD;;MCvBYc,qBAAqB,GAAG;MAExBC,uBAAuB,GAAGC,6BAAmB,CAAoB;AAC5EC,EAAAA,GAAG,EAAEH,qBADuE;AAE5EI,EAAAA,MAAM,EAAE,IAFoE;AAG5EC,EAAAA,QAAQ,EAAE1B;AAHkE,CAApB;;;;;;"}