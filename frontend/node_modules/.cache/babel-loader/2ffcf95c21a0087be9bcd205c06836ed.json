{"ast":null,"code":"import { createPluginFactory, getParent, insertNodes } from '@udecode/plate-core';\nconst ELEMENT_MEDIA_EMBED = 'media_embed';\n/**\n * Enables support for embeddable media such as YouTube\n * or Vimeo videos, Instagram posts and tweets or Google Maps.\n */\n\nconst createMediaEmbedPlugin = createPluginFactory({\n  key: ELEMENT_MEDIA_EMBED,\n  isElement: true,\n  isVoid: true,\n  then: (editor, {\n    type\n  }) => ({\n    deserializeHtml: {\n      getNode: el => {\n        const url = el.getAttribute('src');\n\n        if (url) {\n          return {\n            type,\n            url\n          };\n        }\n      },\n      validNodeName: 'IFRAME'\n    }\n  })\n});\n\nconst insertMediaEmbed = (editor, {\n  url = '',\n  key = ELEMENT_MEDIA_EMBED\n}) => {\n  if (!editor.selection) return;\n  const selectionParentEntry = getParent(editor, editor.selection);\n  if (!selectionParentEntry) return;\n  const [, path] = selectionParentEntry;\n  insertNodes(editor, {\n    type: key,\n    url,\n    children: [{\n      text: ''\n    }]\n  }, {\n    at: path\n  });\n};\n\nexport { ELEMENT_MEDIA_EMBED, createMediaEmbedPlugin, insertMediaEmbed };","map":{"version":3,"sources":["../src/createMediaEmbedPlugin.ts","../src/transforms/insertMediaEmbed.ts"],"names":["ELEMENT_MEDIA_EMBED","createMediaEmbedPlugin","createPluginFactory","key","isElement","isVoid","then","type","deserializeHtml","getNode","el","url","validNodeName","insertMediaEmbed","editor","selectionParentEntry","getParent","insertNodes","children","text","at","path"],"mappings":";MAEaA,mBAAmB,GAAG,a;AAEnC;AACA;AACA;AACA;;MACaC,sBAAsB,GAAGC,mBAAmB,CAAC;AACxDC,EAAAA,GAAG,EADqD,mBAAA;AAExDC,EAAAA,SAAS,EAF+C,IAAA;AAGxDC,EAAAA,MAAM,EAHkD,IAAA;AAIxDC,EAAAA,IAAI,EAAE,CAAA,MAAA,EAAS;AAAEC,IAAAA;AAAF,GAAT,MAAuB;AAC3BC,IAAAA,eAAe,EAAE;AACfC,MAAAA,OAAO,EAAGC,EAAD,IAAqB;AAC5B,cAAMC,GAAG,GAAGD,EAAE,CAAFA,YAAAA,CAAZ,KAAYA,CAAZ;;AACA,YAAA,GAAA,EAAS;AACP,iBAAO;AAAA,YAAA,IAAA;AAELC,YAAAA;AAFK,WAAP;AAID;AARY,OAAA;AAUfC,MAAAA,aAAa,EAAE;AAVA;AADU,GAAvB;AAJkD,CAAD,C;;MCE5CC,gBAAgB,GAAG,CAAA,MAAA,EAE9B;AACEF,EAAAA,GAAG,GADL,EAAA;AAEER,EAAAA,GAAG,GAAGH;AAFR,CAF8B,KAMrB;AACT,MAAI,CAACc,MAAM,CAAX,SAAA,EAAuB;AACvB,QAAMC,oBAAoB,GAAGC,SAAS,CAAA,MAAA,EAASF,MAAM,CAArD,SAAsC,CAAtC;AACA,MAAI,CAAJ,oBAAA,EAA2B;AAC3B,QAAM,GAAA,IAAA,IAAN,oBAAA;AACAG,EAAAA,WAAW,CAAA,MAAA,EAET;AACEV,IAAAA,IAAI,EADN,GAAA;AAAA,IAAA,GAAA;AAGEW,IAAAA,QAAQ,EAAE,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD;AAHZ,GAFS,EAOT;AAAEC,IAAAA,EAAE,EAAEC;AAAN,GAPS,CAAXJ;AASD,C","sourcesContent":["import { createPluginFactory } from '@udecode/plate-core';\n\nexport const ELEMENT_MEDIA_EMBED = 'media_embed';\n\n/**\n * Enables support for embeddable media such as YouTube\n * or Vimeo videos, Instagram posts and tweets or Google Maps.\n */\nexport const createMediaEmbedPlugin = createPluginFactory({\n  key: ELEMENT_MEDIA_EMBED,\n  isElement: true,\n  isVoid: true,\n  then: (editor, { type }) => ({\n    deserializeHtml: {\n      getNode: (el: HTMLElement) => {\n        const url = el.getAttribute('src');\n        if (url) {\n          return {\n            type,\n            url,\n          };\n        }\n      },\n      validNodeName: 'IFRAME',\n    },\n  }),\n});\n","import {\n  getParent,\n  insertNodes,\n  PlateEditor,\n  PlatePluginKey,\n  TElement,\n} from '@udecode/plate-core';\nimport { ELEMENT_MEDIA_EMBED } from '../createMediaEmbedPlugin';\nimport { MediaEmbedNodeData } from '../types';\n\nexport const insertMediaEmbed = (\n  editor: PlateEditor,\n  {\n    url = '',\n    key = ELEMENT_MEDIA_EMBED,\n  }: Partial<MediaEmbedNodeData> & PlatePluginKey\n): void => {\n  if (!editor.selection) return;\n  const selectionParentEntry = getParent(editor, editor.selection);\n  if (!selectionParentEntry) return;\n  const [, path] = selectionParentEntry;\n  insertNodes<TElement>(\n    editor,\n    {\n      type: key,\n      url,\n      children: [{ text: '' }],\n    },\n    { at: path }\n  );\n};\n"]},"metadata":{},"sourceType":"module"}