{"ast":null,"code":"import { createPluginFactory, getPluginType, ELEMENT_DEFAULT, getPluginInjectProps, unsetNodes, setNodes } from '@udecode/plate-core';\nimport { Editor } from 'slate';\nconst KEY_ALIGN = 'align';\n/**\n * Creates a plugin that adds alignment functionality to the editor.\n */\n\nconst createAlignPlugin = createPluginFactory({\n  key: KEY_ALIGN,\n  then: editor => ({\n    inject: {\n      props: {\n        nodeKey: KEY_ALIGN,\n        defaultNodeValue: 'left',\n        styleKey: 'textAlign',\n        validNodeValues: ['left', 'center', 'right', 'justify'],\n        validTypes: [getPluginType(editor, ELEMENT_DEFAULT)]\n      }\n    }\n  })\n});\n\nconst setAlign = (editor, {\n  key = KEY_ALIGN,\n  value,\n  setNodesOptions\n}) => {\n  const {\n    validTypes,\n    defaultNodeValue,\n    nodeKey\n  } = getPluginInjectProps(editor, key);\n\n  const match = n => Editor.isBlock(editor, n) && !!validTypes && validTypes.includes(n.type);\n\n  if (value === defaultNodeValue) {\n    unsetNodes(editor, nodeKey, {\n      match,\n      ...setNodesOptions\n    });\n  } else {\n    setNodes(editor, {\n      [nodeKey]: value\n    }, {\n      match,\n      ...setNodesOptions\n    });\n  }\n};\n\nexport { KEY_ALIGN, createAlignPlugin, setAlign };","map":{"version":3,"sources":["../src/createAlignPlugin.ts","../src/transforms/setAlign.ts"],"names":["KEY_ALIGN","createAlignPlugin","createPluginFactory","key","then","editor","inject","props","nodeKey","defaultNodeValue","styleKey","validNodeValues","validTypes","getPluginType","setAlign","setNodesOptions","getPluginInjectProps","match","n","Editor","value","unsetNodes","setNodes"],"mappings":";;MAMaA,SAAS,GAAG,O;AAEzB;AACA;AACA;;MACaC,iBAAiB,GAAGC,mBAAmB,CAAC;AACnDC,EAAAA,GAAG,EADgD,SAAA;AAEnDC,EAAAA,IAAI,EAAGC,MAAD,KAAa;AACjBC,IAAAA,MAAM,EAAE;AACNC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EADF,SAAA;AAELC,QAAAA,gBAAgB,EAFX,MAAA;AAGLC,QAAAA,QAAQ,EAHH,WAAA;AAILC,QAAAA,eAAe,EAAE,CAAA,MAAA,EAAA,QAAA,EAAA,OAAA,EAJZ,SAIY,CAJZ;AAKLC,QAAAA,UAAU,EAAE,CAACC,aAAa,CAAA,MAAA,EAAd,eAAc,CAAd;AALP;AADD;AADS,GAAb;AAF6C,CAAD,C;;MCEvCC,QAAQ,GAAG,CAAA,MAAA,EAEtB;AACEX,EAAAA,GAAG,GADL,SAAA;AAAA,EAAA,KAAA;AAGEY,EAAAA;AAHF,CAFsB,KAOnB;AACH,QAAM;AAAA,IAAA,UAAA;AAAA,IAAA,gBAAA;AAAgCP,IAAAA;AAAhC,MAA4CQ,oBAAoB,CAAA,MAAA,EAAtE,GAAsE,CAAtE;;AAKA,QAAMC,KAAiB,GAAIC,CAAD,IACxBC,MAAM,CAANA,OAAAA,CAAAA,MAAAA,EAAAA,CAAAA,KAA6B,CAAC,CAA9BA,UAAAA,IAA6CP,UAAU,CAAVA,QAAAA,CAAoBM,CAAC,CADpE,IAC+CN,CAD/C;;AAGA,MAAIQ,KAAK,KAAT,gBAAA,EAAgC;AAC9BC,IAAAA,UAAU,CAAA,MAAA,EAAA,OAAA,EAAmB;AAAA,MAAA,KAAA;AAE3B,SAAGN;AAFwB,KAAnB,CAAVM;AADF,GAAA,MAKO;AACLC,IAAAA,QAAQ,CAAA,MAAA,EAEN;AAAE,OAAA,OAAA,GAAYF;AAAd,KAFM,EAGN;AAAA,MAAA,KAAA;AAEE,SAAGL;AAFL,KAHM,CAARO;AAQD;AACF,C","sourcesContent":["import {\n  createPluginFactory,\n  ELEMENT_DEFAULT,\n  getPluginType,\n} from '@udecode/plate-core';\n\nexport const KEY_ALIGN = 'align';\n\n/**\n * Creates a plugin that adds alignment functionality to the editor.\n */\nexport const createAlignPlugin = createPluginFactory({\n  key: KEY_ALIGN,\n  then: (editor) => ({\n    inject: {\n      props: {\n        nodeKey: KEY_ALIGN,\n        defaultNodeValue: 'left',\n        styleKey: 'textAlign',\n        validNodeValues: ['left', 'center', 'right', 'justify'],\n        validTypes: [getPluginType(editor, ELEMENT_DEFAULT)],\n      },\n    },\n  }),\n});\n","import {\n  getPluginInjectProps,\n  PlateEditor,\n  PlatePluginKey,\n  setNodes,\n  SetNodesOptions,\n  TNodeMatch,\n  unsetNodes,\n} from '@udecode/plate-core';\nimport { Editor } from 'slate';\nimport { KEY_ALIGN } from '../createAlignPlugin';\nimport { Alignment } from '../types';\n\nexport const setAlign = (\n  editor: PlateEditor,\n  {\n    key = KEY_ALIGN,\n    value,\n    setNodesOptions,\n  }: { value: Alignment; setNodesOptions?: SetNodesOptions } & PlatePluginKey\n) => {\n  const { validTypes, defaultNodeValue, nodeKey } = getPluginInjectProps(\n    editor,\n    key\n  );\n\n  const match: TNodeMatch = (n) =>\n    Editor.isBlock(editor, n) && !!validTypes && validTypes.includes(n.type);\n\n  if (value === defaultNodeValue) {\n    unsetNodes(editor, nodeKey!, {\n      match,\n      ...setNodesOptions,\n    });\n  } else {\n    setNodes(\n      editor,\n      { [nodeKey!]: value },\n      {\n        match,\n        ...setNodesOptions,\n      }\n    );\n  }\n};\n"]},"metadata":{},"sourceType":"module"}