{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.clone = exports.text = exports.toString = exports.html = exports.empty = exports.replaceWith = exports.remove = exports.insertBefore = exports.before = exports.insertAfter = exports.after = exports.wrapAll = exports.unwrap = exports.wrapInner = exports.wrap = exports.prepend = exports.append = exports.prependTo = exports.appendTo = exports._makeDomArray = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar domhandler_1 = require(\"domhandler\");\n/**\r\n * Methods for modifying the DOM structure.\r\n *\r\n * @module cheerio/manipulation\r\n */\n\n\nvar domhandler_2 = require(\"domhandler\");\n\nvar parse_1 = tslib_1.__importStar(require(\"../parse\"));\n\nvar static_1 = require(\"../static\");\n\nvar utils_1 = require(\"../utils\");\n\nvar htmlparser2_1 = require(\"htmlparser2\");\n/**\r\n * Create an array of nodes, recursing into arrays and parsing strings if necessary.\r\n *\r\n * @private\r\n * @category Manipulation\r\n * @param elem - Elements to make an array of.\r\n * @param clone - Optionally clone nodes.\r\n * @returns The array of nodes.\r\n */\n\n\nfunction _makeDomArray(elem, clone) {\n  var _this = this;\n\n  if (elem == null) {\n    return [];\n  }\n\n  if (utils_1.isCheerio(elem)) {\n    return clone ? utils_1.cloneDom(elem.get()) : elem.get();\n  }\n\n  if (Array.isArray(elem)) {\n    return elem.reduce(function (newElems, el) {\n      return newElems.concat(_this._makeDomArray(el, clone));\n    }, []);\n  }\n\n  if (typeof elem === 'string') {\n    return parse_1.default(elem, this.options, false).children;\n  }\n\n  return clone ? utils_1.cloneDom([elem]) : [elem];\n}\n\nexports._makeDomArray = _makeDomArray;\n\nfunction _insert(concatenator) {\n  return function () {\n    var _this = this;\n\n    var elems = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      elems[_i] = arguments[_i];\n    }\n\n    var lastIdx = this.length - 1;\n    return utils_1.domEach(this, function (el, i) {\n      if (!domhandler_1.hasChildren(el)) return;\n      var domSrc = typeof elems[0] === 'function' ? elems[0].call(el, i, static_1.html(el.children)) : elems;\n\n      var dom = _this._makeDomArray(domSrc, i < lastIdx);\n\n      concatenator(dom, el.children, el);\n    });\n  };\n}\n/**\r\n * Modify an array in-place, removing some number of elements and adding new\r\n * elements directly following them.\r\n *\r\n * @private\r\n * @category Manipulation\r\n * @param array - Target array to splice.\r\n * @param spliceIdx - Index at which to begin changing the array.\r\n * @param spliceCount - Number of elements to remove from the array.\r\n * @param newElems - Elements to insert into the array.\r\n * @param parent - The parent of the node.\r\n * @returns The spliced array.\r\n */\n\n\nfunction uniqueSplice(array, spliceIdx, spliceCount, newElems, parent) {\n  var _a, _b;\n\n  var spliceArgs = tslib_1.__spreadArray([spliceIdx, spliceCount], newElems);\n\n  var prev = array[spliceIdx - 1] || null;\n  var next = array[spliceIdx + spliceCount] || null;\n  /*\r\n   * Before splicing in new elements, ensure they do not already appear in the\r\n   * current array.\r\n   */\n\n  for (var idx = 0; idx < newElems.length; ++idx) {\n    var node = newElems[idx];\n    var oldParent = node.parent;\n\n    if (oldParent) {\n      var prevIdx = oldParent.children.indexOf(newElems[idx]);\n\n      if (prevIdx > -1) {\n        oldParent.children.splice(prevIdx, 1);\n\n        if (parent === oldParent && spliceIdx > prevIdx) {\n          spliceArgs[0]--;\n        }\n      }\n    }\n\n    node.parent = parent;\n\n    if (node.prev) {\n      node.prev.next = (_a = node.next) !== null && _a !== void 0 ? _a : null;\n    }\n\n    if (node.next) {\n      node.next.prev = (_b = node.prev) !== null && _b !== void 0 ? _b : null;\n    }\n\n    node.prev = newElems[idx - 1] || prev;\n    node.next = newElems[idx + 1] || next;\n  }\n\n  if (prev) {\n    prev.next = newElems[0];\n  }\n\n  if (next) {\n    next.prev = newElems[newElems.length - 1];\n  }\n\n  return array.splice.apply(array, spliceArgs);\n}\n/**\r\n * Insert every element in the set of matched elements to the end of the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').appendTo('#fruits');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to append elements to.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/appendTo/}\r\n */\n\n\nfunction appendTo(target) {\n  var appendTarget = utils_1.isCheerio(target) ? target : this._make(target);\n  appendTarget.append(this);\n  return this;\n}\n\nexports.appendTo = appendTo;\n/**\r\n * Insert every element in the set of matched elements to the beginning of the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').prependTo('#fruits');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to prepend elements to.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/prependTo/}\r\n */\n\nfunction prependTo(target) {\n  var prependTarget = utils_1.isCheerio(target) ? target : this._make(target);\n  prependTarget.prepend(this);\n  return this;\n}\n\nexports.prependTo = prependTo;\n/**\r\n * Inserts content as the *last* child of each of the selected elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('ul').append('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @see {@link https://api.jquery.com/append/}\r\n */\n\nexports.append = _insert(function (dom, children, parent) {\n  uniqueSplice(children, children.length, 0, dom, parent);\n});\n/**\r\n * Inserts content as the *first* child of each of the selected elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('ul').prepend('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @see {@link https://api.jquery.com/prepend/}\r\n */\n\nexports.prepend = _insert(function (dom, children, parent) {\n  uniqueSplice(children, 0, 0, dom, parent);\n});\n\nfunction _wrap(insert) {\n  return function (wrapper) {\n    var lastIdx = this.length - 1;\n    var lastParent = this.parents().last();\n\n    for (var i = 0; i < this.length; i++) {\n      var el = this[i];\n      var wrap_1 = typeof wrapper === 'function' ? wrapper.call(el, i, el) : typeof wrapper === 'string' && !utils_1.isHtml(wrapper) ? lastParent.find(wrapper).clone() : wrapper;\n\n      var wrapperDom = this._makeDomArray(wrap_1, i < lastIdx)[0];\n\n      if (!wrapperDom || !htmlparser2_1.DomUtils.hasChildren(wrapperDom)) continue;\n      var elInsertLocation = wrapperDom;\n      /*\r\n       * Find the deepest child. Only consider the first tag child of each node\r\n       * (ignore text); stop if no children are found.\r\n       */\n\n      var j = 0;\n\n      while (j < elInsertLocation.children.length) {\n        var child = elInsertLocation.children[j];\n\n        if (utils_1.isTag(child)) {\n          elInsertLocation = child;\n          j = 0;\n        } else {\n          j++;\n        }\n      }\n\n      insert(el, elInsertLocation, [wrapperDom]);\n    }\n\n    return this;\n  };\n}\n/**\r\n * The .wrap() function can take any string or object that could be passed to\r\n * the $() factory function to specify a DOM structure. This structure may be\r\n * nested several levels deep, but should contain only one inmost element. A\r\n * copy of this structure will be wrapped around each of the elements in the set\r\n * of matched elements. This method returns the original set of elements for\r\n * chaining purposes.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const redFruit = $('<div class=\"red-fruit\"></div>');\r\n * $('.apple').wrap(redFruit);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <div class=\"red-fruit\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //     </div>\r\n * //     <li class=\"orange\">Orange</li>\r\n * //     <li class=\"plum\">Plum</li>\r\n * //   </ul>\r\n *\r\n * const healthy = $('<div class=\"healthy\"></div>');\r\n * $('li').wrap(healthy);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <div class=\"healthy\">\r\n * //       <li class=\"apple\">Apple</li>\r\n * //     </div>\r\n * //     <div class=\"healthy\">\r\n * //       <li class=\"orange\">Orange</li>\r\n * //     </div>\r\n * //     <div class=\"healthy\">\r\n * //        <li class=\"plum\">Plum</li>\r\n * //     </div>\r\n * //   </ul>\r\n * ```\r\n *\r\n * @param wrapper - The DOM structure to wrap around each element in the selection.\r\n * @see {@link https://api.jquery.com/wrap/}\r\n */\n\n\nexports.wrap = _wrap(function (el, elInsertLocation, wrapperDom) {\n  var parent = el.parent;\n  if (!parent) return;\n  var siblings = parent.children;\n  var index = siblings.indexOf(el);\n  parse_1.update([el], elInsertLocation);\n  /*\r\n   * The previous operation removed the current element from the `siblings`\r\n   * array, so the `dom` array can be inserted without removing any\r\n   * additional elements.\r\n   */\n\n  uniqueSplice(siblings, index, 0, wrapperDom, parent);\n});\n/**\r\n * The .wrapInner() function can take any string or object that could be passed\r\n * to the $() factory function to specify a DOM structure. This structure may be\r\n * nested several levels deep, but should contain only one inmost element. The\r\n * structure will be wrapped around the content of each of the elements in the\r\n * set of matched elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const redFruit = $('<div class=\"red-fruit\"></div>');\r\n * $('.apple').wrapInner(redFruit);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <li class=\"apple\">\r\n * //       <div class=\"red-fruit\">Apple</div>\r\n * //     </li>\r\n * //     <li class=\"orange\">Orange</li>\r\n * //     <li class=\"pear\">Pear</li>\r\n * //   </ul>\r\n *\r\n * const healthy = $('<div class=\"healthy\"></div>');\r\n * $('li').wrapInner(healthy);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <li class=\"apple\">\r\n * //       <div class=\"healthy\">Apple</div>\r\n * //     </li>\r\n * //     <li class=\"orange\">\r\n * //       <div class=\"healthy\">Orange</div>\r\n * //     </li>\r\n * //     <li class=\"pear\">\r\n * //       <div class=\"healthy\">Pear</div>\r\n * //     </li>\r\n * //   </ul>\r\n * ```\r\n *\r\n * @param wrapper - The DOM structure to wrap around the content of each element\r\n *   in the selection.\r\n * @returns The instance itself, for chaining.\r\n * @see {@link https://api.jquery.com/wrapInner/}\r\n */\n\nexports.wrapInner = _wrap(function (el, elInsertLocation, wrapperDom) {\n  if (!domhandler_1.hasChildren(el)) return;\n  parse_1.update(el.children, elInsertLocation);\n  parse_1.update(wrapperDom, el);\n});\n/**\r\n * The .unwrap() function, removes the parents of the set of matched elements\r\n * from the DOM, leaving the matched elements in their place.\r\n *\r\n * @category Manipulation\r\n * @example <caption>without selector</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<div id=test>\\n  <div><p>Hello</p></div>\\n  <div><p>World</p></div>\\n</div>'\r\n * );\r\n * $('#test p').unwrap();\r\n *\r\n * //=> <div id=test>\r\n * //     <p>Hello</p>\r\n * //     <p>World</p>\r\n * //   </div>\r\n * ```\r\n *\r\n * @example <caption>with selector</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<div id=test>\\n  <p>Hello</p>\\n  <b><p>World</p></b>\\n</div>'\r\n * );\r\n * $('#test p').unwrap('b');\r\n *\r\n * //=> <div id=test>\r\n * //     <p>Hello</p>\r\n * //     <p>World</p>\r\n * //   </div>\r\n * ```\r\n *\r\n * @param selector - A selector to check the parent element against. If an\r\n *   element's parent does not match the selector, the element won't be unwrapped.\r\n * @returns The instance itself, for chaining.\r\n * @see {@link https://api.jquery.com/unwrap/}\r\n */\n\nfunction unwrap(selector) {\n  var _this = this;\n\n  this.parent(selector).not('body').each(function (_, el) {\n    _this._make(el).replaceWith(el.children);\n  });\n  return this;\n}\n\nexports.unwrap = unwrap;\n/**\r\n * The .wrapAll() function can take any string or object that could be passed to\r\n * the $() function to specify a DOM structure. This structure may be nested\r\n * several levels deep, but should contain only one inmost element. The\r\n * structure will be wrapped around all of the elements in the set of matched\r\n * elements, as a single group.\r\n *\r\n * @category Manipulation\r\n * @example <caption>With markup passed to `wrapAll`</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<div class=\"container\"><div class=\"inner\">First</div><div class=\"inner\">Second</div></div>'\r\n * );\r\n * $('.inner').wrapAll(\"<div class='new'></div>\");\r\n *\r\n * //=> <div class=\"container\">\r\n * //     <div class='new'>\r\n * //       <div class=\"inner\">First</div>\r\n * //       <div class=\"inner\">Second</div>\r\n * //     </div>\r\n * //   </div>\r\n * ```\r\n *\r\n * @example <caption>With an existing cheerio instance</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<span>Span 1</span><strong>Strong</strong><span>Span 2</span>'\r\n * );\r\n * const wrap = $('<div><p><em><b></b></em></p></div>');\r\n * $('span').wrapAll(wrap);\r\n *\r\n * //=> <div>\r\n * //     <p>\r\n * //       <em>\r\n * //         <b>\r\n * //           <span>Span 1</span>\r\n * //           <span>Span 2</span>\r\n * //         </b>\r\n * //       </em>\r\n * //     </p>\r\n * //   </div>\r\n * //   <strong>Strong</strong>\r\n * ```\r\n *\r\n * @param wrapper - The DOM structure to wrap around all matched elements in the\r\n *   selection.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/wrapAll/}\r\n */\n\nfunction wrapAll(wrapper) {\n  var el = this[0];\n\n  if (el) {\n    var wrap_2 = this._make(typeof wrapper === 'function' ? wrapper.call(el, 0, el) : wrapper).insertBefore(el); // If html is given as wrapper, wrap may contain text elements\n\n\n    var elInsertLocation = void 0;\n\n    for (var i = 0; i < wrap_2.length; i++) {\n      if (wrap_2[i].type === 'tag') elInsertLocation = wrap_2[i];\n    }\n\n    var j = 0;\n    /*\r\n     * Find the deepest child. Only consider the first tag child of each node\r\n     * (ignore text); stop if no children are found.\r\n     */\n\n    while (elInsertLocation && j < elInsertLocation.children.length) {\n      var child = elInsertLocation.children[j];\n\n      if (child.type === 'tag') {\n        elInsertLocation = child;\n        j = 0;\n      } else {\n        j++;\n      }\n    }\n\n    if (elInsertLocation) this._make(elInsertLocation).append(this);\n  }\n\n  return this;\n}\n\nexports.wrapAll = wrapAll;\n/* eslint-disable jsdoc/check-param-names*/\n\n/**\r\n * Insert content next to each element in the set of matched elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('.apple').after('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param content - HTML string, DOM element, array of DOM elements or Cheerio\r\n *   to insert after each element in the set of matched elements.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/after/}\r\n */\n\nfunction after() {\n  var _this = this;\n\n  var elems = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    elems[_i] = arguments[_i];\n  }\n\n  var lastIdx = this.length - 1;\n  return utils_1.domEach(this, function (el, i) {\n    var parent = el.parent;\n\n    if (!htmlparser2_1.DomUtils.hasChildren(el) || !parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return;\n    var domSrc = typeof elems[0] === 'function' ? elems[0].call(el, i, static_1.html(el.children)) : elems;\n\n    var dom = _this._makeDomArray(domSrc, i < lastIdx); // Add element after `this` element\n\n\n    uniqueSplice(siblings, index + 1, 0, dom, parent);\n  });\n}\n\nexports.after = after;\n/* eslint-enable jsdoc/check-param-names*/\n\n/**\r\n * Insert every element in the set of matched elements after the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').insertAfter('.apple');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to insert elements after.\r\n * @returns The set of newly inserted elements.\r\n * @see {@link https://api.jquery.com/insertAfter/}\r\n */\n\nfunction insertAfter(target) {\n  var _this = this;\n\n  if (typeof target === 'string') {\n    target = this._make(target);\n  }\n\n  this.remove();\n  var clones = [];\n\n  this._makeDomArray(target).forEach(function (el) {\n    var clonedSelf = _this.clone().toArray();\n\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return; // Add cloned `this` element(s) after target element\n\n    uniqueSplice(siblings, index + 1, 0, clonedSelf, parent);\n    clones.push.apply(clones, clonedSelf);\n  });\n\n  return this._make(clones);\n}\n\nexports.insertAfter = insertAfter;\n/* eslint-disable jsdoc/check-param-names*/\n\n/**\r\n * Insert content previous to each element in the set of matched elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('.apple').before('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param content - HTML string, DOM element, array of DOM elements or Cheerio\r\n *   to insert before each element in the set of matched elements.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/before/}\r\n */\n\nfunction before() {\n  var _this = this;\n\n  var elems = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    elems[_i] = arguments[_i];\n  }\n\n  var lastIdx = this.length - 1;\n  return utils_1.domEach(this, function (el, i) {\n    var parent = el.parent;\n\n    if (!htmlparser2_1.DomUtils.hasChildren(el) || !parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return;\n    var domSrc = typeof elems[0] === 'function' ? elems[0].call(el, i, static_1.html(el.children)) : elems;\n\n    var dom = _this._makeDomArray(domSrc, i < lastIdx); // Add element before `el` element\n\n\n    uniqueSplice(siblings, index, 0, dom, parent);\n  });\n}\n\nexports.before = before;\n/* eslint-enable jsdoc/check-param-names*/\n\n/**\r\n * Insert every element in the set of matched elements before the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').insertBefore('.apple');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to insert elements before.\r\n * @returns The set of newly inserted elements.\r\n * @see {@link https://api.jquery.com/insertBefore/}\r\n */\n\nfunction insertBefore(target) {\n  var _this = this;\n\n  var targetArr = this._make(target);\n\n  this.remove();\n  var clones = [];\n  utils_1.domEach(targetArr, function (el) {\n    var clonedSelf = _this.clone().toArray();\n\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var index = siblings.indexOf(el); // If not found, move on\n\n    /* istanbul ignore next */\n\n    if (index < 0) return; // Add cloned `this` element(s) after target element\n\n    uniqueSplice(siblings, index, 0, clonedSelf, parent);\n    clones.push.apply(clones, clonedSelf);\n  });\n  return this._make(clones);\n}\n\nexports.insertBefore = insertBefore;\n/**\r\n * Removes the set of matched elements from the DOM and all their children.\r\n * `selector` filters the set of matched elements to be removed.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('.pear').remove();\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param selector - Optional selector for elements to remove.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/remove/}\r\n */\n\nfunction remove(selector) {\n  // Filter if we have selector\n  var elems = selector ? this.filter(selector) : this;\n  utils_1.domEach(elems, function (el) {\n    htmlparser2_1.DomUtils.removeElement(el);\n    el.prev = el.next = el.parent = null;\n  });\n  return this;\n}\n\nexports.remove = remove;\n/**\r\n * Replaces matched elements with `content`.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const plum = $('<li class=\"plum\">Plum</li>');\r\n * $('.pear').replaceWith(plum);\r\n * $.html();\r\n * //=> <ul id=\"fruits\">\r\n * //     <li class=\"apple\">Apple</li>\r\n * //     <li class=\"orange\">Orange</li>\r\n * //     <li class=\"plum\">Plum</li>\r\n * //   </ul>\r\n * ```\r\n *\r\n * @param content - Replacement for matched elements.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/replaceWith/}\r\n */\n\nfunction replaceWith(content) {\n  var _this = this;\n\n  return utils_1.domEach(this, function (el, i) {\n    var parent = el.parent;\n\n    if (!parent) {\n      return;\n    }\n\n    var siblings = parent.children;\n    var cont = typeof content === 'function' ? content.call(el, i, el) : content;\n\n    var dom = _this._makeDomArray(cont);\n    /*\r\n     * In the case that `dom` contains nodes that already exist in other\r\n     * structures, ensure those nodes are properly removed.\r\n     */\n\n\n    parse_1.update(dom, null);\n    var index = siblings.indexOf(el); // Completely remove old element\n\n    uniqueSplice(siblings, index, 1, dom, parent);\n\n    if (!dom.includes(el)) {\n      el.parent = el.prev = el.next = null;\n    }\n  });\n}\n\nexports.replaceWith = replaceWith;\n/**\r\n * Empties an element, removing all its children.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('ul').empty();\r\n * $.html();\r\n * //=>  <ul id=\"fruits\"></ul>\r\n * ```\r\n *\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/empty/}\r\n */\n\nfunction empty() {\n  return utils_1.domEach(this, function (el) {\n    if (!htmlparser2_1.DomUtils.hasChildren(el)) return;\n    el.children.forEach(function (child) {\n      child.next = child.prev = child.parent = null;\n    });\n    el.children.length = 0;\n  });\n}\n\nexports.empty = empty;\n\nfunction html(str) {\n  if (str === undefined) {\n    var el = this[0];\n    if (!el || !htmlparser2_1.DomUtils.hasChildren(el)) return null;\n    return static_1.html(el.children, this.options);\n  } // Keep main options unchanged\n\n\n  var opts = tslib_1.__assign(tslib_1.__assign({}, this.options), {\n    context: null\n  });\n\n  return utils_1.domEach(this, function (el) {\n    if (!htmlparser2_1.DomUtils.hasChildren(el)) return;\n    el.children.forEach(function (child) {\n      child.next = child.prev = child.parent = null;\n    });\n    opts.context = el;\n    var content = utils_1.isCheerio(str) ? str.toArray() : parse_1.default(\"\" + str, opts, false).children;\n    parse_1.update(content, el);\n  });\n}\n\nexports.html = html;\n/**\r\n * Turns the collection to a string. Alias for `.html()`.\r\n *\r\n * @category Manipulation\r\n * @returns The rendered document.\r\n */\n\nfunction toString() {\n  return static_1.html(this, this.options);\n}\n\nexports.toString = toString;\n\nfunction text(str) {\n  var _this = this; // If `str` is undefined, act as a \"getter\"\n\n\n  if (str === undefined) {\n    return static_1.text(this);\n  }\n\n  if (typeof str === 'function') {\n    // Function support\n    return utils_1.domEach(this, function (el, i) {\n      text.call(_this._make(el), str.call(el, i, static_1.text([el])));\n    });\n  } // Append text node to each selected elements\n\n\n  return utils_1.domEach(this, function (el) {\n    if (!htmlparser2_1.DomUtils.hasChildren(el)) return;\n    el.children.forEach(function (child) {\n      child.next = child.prev = child.parent = null;\n    });\n    var textNode = new domhandler_2.Text(str);\n    parse_1.update(textNode, el);\n  });\n}\n\nexports.text = text;\n/**\r\n * Clone the cheerio object.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const moreFruit = $('#fruits').clone();\r\n * ```\r\n *\r\n * @returns The cloned object.\r\n * @see {@link https://api.jquery.com/clone/}\r\n */\n\nfunction clone() {\n  return this._make(utils_1.cloneDom(this.get()));\n}\n\nexports.clone = clone;","map":{"version":3,"sources":["C:/Users/ghdus/OneDrive/바탕 화면/team-project/nlp-project-team2/frontend/node_modules/cheerio/lib/api/manipulation.js"],"names":["Object","defineProperty","exports","value","clone","text","toString","html","empty","replaceWith","remove","insertBefore","before","insertAfter","after","wrapAll","unwrap","wrapInner","wrap","prepend","append","prependTo","appendTo","_makeDomArray","tslib_1","require","domhandler_1","domhandler_2","parse_1","__importStar","static_1","utils_1","htmlparser2_1","elem","_this","isCheerio","cloneDom","get","Array","isArray","reduce","newElems","el","concat","default","options","children","_insert","concatenator","elems","_i","arguments","length","lastIdx","domEach","i","hasChildren","domSrc","call","dom","uniqueSplice","array","spliceIdx","spliceCount","parent","_a","_b","spliceArgs","__spreadArray","prev","next","idx","node","oldParent","prevIdx","indexOf","splice","apply","target","appendTarget","_make","prependTarget","_wrap","insert","wrapper","lastParent","parents","last","wrap_1","isHtml","find","wrapperDom","DomUtils","elInsertLocation","j","child","isTag","siblings","index","update","selector","not","each","_","wrap_2","type","clones","forEach","clonedSelf","toArray","push","targetArr","filter","removeElement","content","cont","includes","str","undefined","opts","__assign","context","textNode","Text"],"mappings":"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AAClB,QAAtB;AACA,MAAIoD,KAAK,GAAGD,QAAQ,CAACtB,OAAT,CAAiBjC,EAAjB,CAAZ;AACAd,EAAAA,OAAO,CAACuE,MAAR,CAAe,CAACzD,EAAD,CAAf,EAAqBmD,gBAArB;AACA;AACJ;AACA;AACA;AACA;;AACIjC,EAAAA,YAAY,CAACqC,QAAD,EAAWC,KAAX,EAAkB,CAAlB,EAAqBP,UAArB,EAAiC3B,MAAjC,CAAZ;AACH,CAbmB,CAApB;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA9D,OAAO,CAACe,SAAR,GAAoBiE,KAAK,CAAC,UAAUxC,EAAV,EAAcmD,gBAAd,EAAgCF,UAAhC,EAA4C;AAClE,MAAI,CAACjE,YAAY,CAAC8B,WAAb,CAAyBd,EAAzB,CAAL,EACI;AACJd,EAAAA,OAAO,CAACuE,MAAR,CAAezD,EAAE,CAACI,QAAlB,EAA4B+C,gBAA5B;AACAjE,EAAAA,OAAO,CAACuE,MAAR,CAAeR,UAAf,EAA2BjD,EAA3B;AACH,CALwB,CAAzB;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAS1B,MAAT,CAAgBoF,QAAhB,EAA0B;AACtB,MAAIlE,KAAK,GAAG,IAAZ;;AACA,OAAK8B,MAAL,CAAYoC,QAAZ,EACKC,GADL,CACS,MADT,EAEKC,IAFL,CAEU,UAAUC,CAAV,EAAa7D,EAAb,EAAiB;AACvBR,IAAAA,KAAK,CAAC8C,KAAN,CAAYtC,EAAZ,EAAgBjC,WAAhB,CAA4BiC,EAAE,CAACI,QAA/B;AAC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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.clone = exports.text = exports.toString = exports.html = exports.empty = exports.replaceWith = exports.remove = exports.insertBefore = exports.before = exports.insertAfter = exports.after = exports.wrapAll = exports.unwrap = exports.wrapInner = exports.wrap = exports.prepend = exports.append = exports.prependTo = exports.appendTo = exports._makeDomArray = void 0;\r\nvar tslib_1 = require(\"tslib\");\r\nvar domhandler_1 = require(\"domhandler\");\r\n/**\r\n * Methods for modifying the DOM structure.\r\n *\r\n * @module cheerio/manipulation\r\n */\r\nvar domhandler_2 = require(\"domhandler\");\r\nvar parse_1 = tslib_1.__importStar(require(\"../parse\"));\r\nvar static_1 = require(\"../static\");\r\nvar utils_1 = require(\"../utils\");\r\nvar htmlparser2_1 = require(\"htmlparser2\");\r\n/**\r\n * Create an array of nodes, recursing into arrays and parsing strings if necessary.\r\n *\r\n * @private\r\n * @category Manipulation\r\n * @param elem - Elements to make an array of.\r\n * @param clone - Optionally clone nodes.\r\n * @returns The array of nodes.\r\n */\r\nfunction _makeDomArray(elem, clone) {\r\n    var _this = this;\r\n    if (elem == null) {\r\n        return [];\r\n    }\r\n    if (utils_1.isCheerio(elem)) {\r\n        return clone ? utils_1.cloneDom(elem.get()) : elem.get();\r\n    }\r\n    if (Array.isArray(elem)) {\r\n        return elem.reduce(function (newElems, el) { return newElems.concat(_this._makeDomArray(el, clone)); }, []);\r\n    }\r\n    if (typeof elem === 'string') {\r\n        return parse_1.default(elem, this.options, false).children;\r\n    }\r\n    return clone ? utils_1.cloneDom([elem]) : [elem];\r\n}\r\nexports._makeDomArray = _makeDomArray;\r\nfunction _insert(concatenator) {\r\n    return function () {\r\n        var _this = this;\r\n        var elems = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            elems[_i] = arguments[_i];\r\n        }\r\n        var lastIdx = this.length - 1;\r\n        return utils_1.domEach(this, function (el, i) {\r\n            if (!domhandler_1.hasChildren(el))\r\n                return;\r\n            var domSrc = typeof elems[0] === 'function'\r\n                ? elems[0].call(el, i, static_1.html(el.children))\r\n                : elems;\r\n            var dom = _this._makeDomArray(domSrc, i < lastIdx);\r\n            concatenator(dom, el.children, el);\r\n        });\r\n    };\r\n}\r\n/**\r\n * Modify an array in-place, removing some number of elements and adding new\r\n * elements directly following them.\r\n *\r\n * @private\r\n * @category Manipulation\r\n * @param array - Target array to splice.\r\n * @param spliceIdx - Index at which to begin changing the array.\r\n * @param spliceCount - Number of elements to remove from the array.\r\n * @param newElems - Elements to insert into the array.\r\n * @param parent - The parent of the node.\r\n * @returns The spliced array.\r\n */\r\nfunction uniqueSplice(array, spliceIdx, spliceCount, newElems, parent) {\r\n    var _a, _b;\r\n    var spliceArgs = tslib_1.__spreadArray([\r\n        spliceIdx,\r\n        spliceCount\r\n    ], newElems);\r\n    var prev = array[spliceIdx - 1] || null;\r\n    var next = array[spliceIdx + spliceCount] || null;\r\n    /*\r\n     * Before splicing in new elements, ensure they do not already appear in the\r\n     * current array.\r\n     */\r\n    for (var idx = 0; idx < newElems.length; ++idx) {\r\n        var node = newElems[idx];\r\n        var oldParent = node.parent;\r\n        if (oldParent) {\r\n            var prevIdx = oldParent.children.indexOf(newElems[idx]);\r\n            if (prevIdx > -1) {\r\n                oldParent.children.splice(prevIdx, 1);\r\n                if (parent === oldParent && spliceIdx > prevIdx) {\r\n                    spliceArgs[0]--;\r\n                }\r\n            }\r\n        }\r\n        node.parent = parent;\r\n        if (node.prev) {\r\n            node.prev.next = (_a = node.next) !== null && _a !== void 0 ? _a : null;\r\n        }\r\n        if (node.next) {\r\n            node.next.prev = (_b = node.prev) !== null && _b !== void 0 ? _b : null;\r\n        }\r\n        node.prev = newElems[idx - 1] || prev;\r\n        node.next = newElems[idx + 1] || next;\r\n    }\r\n    if (prev) {\r\n        prev.next = newElems[0];\r\n    }\r\n    if (next) {\r\n        next.prev = newElems[newElems.length - 1];\r\n    }\r\n    return array.splice.apply(array, spliceArgs);\r\n}\r\n/**\r\n * Insert every element in the set of matched elements to the end of the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').appendTo('#fruits');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to append elements to.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/appendTo/}\r\n */\r\nfunction appendTo(target) {\r\n    var appendTarget = utils_1.isCheerio(target) ? target : this._make(target);\r\n    appendTarget.append(this);\r\n    return this;\r\n}\r\nexports.appendTo = appendTo;\r\n/**\r\n * Insert every element in the set of matched elements to the beginning of the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').prependTo('#fruits');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to prepend elements to.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/prependTo/}\r\n */\r\nfunction prependTo(target) {\r\n    var prependTarget = utils_1.isCheerio(target) ? target : this._make(target);\r\n    prependTarget.prepend(this);\r\n    return this;\r\n}\r\nexports.prependTo = prependTo;\r\n/**\r\n * Inserts content as the *last* child of each of the selected elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('ul').append('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @see {@link https://api.jquery.com/append/}\r\n */\r\nexports.append = _insert(function (dom, children, parent) {\r\n    uniqueSplice(children, children.length, 0, dom, parent);\r\n});\r\n/**\r\n * Inserts content as the *first* child of each of the selected elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('ul').prepend('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @see {@link https://api.jquery.com/prepend/}\r\n */\r\nexports.prepend = _insert(function (dom, children, parent) {\r\n    uniqueSplice(children, 0, 0, dom, parent);\r\n});\r\nfunction _wrap(insert) {\r\n    return function (wrapper) {\r\n        var lastIdx = this.length - 1;\r\n        var lastParent = this.parents().last();\r\n        for (var i = 0; i < this.length; i++) {\r\n            var el = this[i];\r\n            var wrap_1 = typeof wrapper === 'function'\r\n                ? wrapper.call(el, i, el)\r\n                : typeof wrapper === 'string' && !utils_1.isHtml(wrapper)\r\n                    ? lastParent.find(wrapper).clone()\r\n                    : wrapper;\r\n            var wrapperDom = this._makeDomArray(wrap_1, i < lastIdx)[0];\r\n            if (!wrapperDom || !htmlparser2_1.DomUtils.hasChildren(wrapperDom))\r\n                continue;\r\n            var elInsertLocation = wrapperDom;\r\n            /*\r\n             * Find the deepest child. Only consider the first tag child of each node\r\n             * (ignore text); stop if no children are found.\r\n             */\r\n            var j = 0;\r\n            while (j < elInsertLocation.children.length) {\r\n                var child = elInsertLocation.children[j];\r\n                if (utils_1.isTag(child)) {\r\n                    elInsertLocation = child;\r\n                    j = 0;\r\n                }\r\n                else {\r\n                    j++;\r\n                }\r\n            }\r\n            insert(el, elInsertLocation, [wrapperDom]);\r\n        }\r\n        return this;\r\n    };\r\n}\r\n/**\r\n * The .wrap() function can take any string or object that could be passed to\r\n * the $() factory function to specify a DOM structure. This structure may be\r\n * nested several levels deep, but should contain only one inmost element. A\r\n * copy of this structure will be wrapped around each of the elements in the set\r\n * of matched elements. This method returns the original set of elements for\r\n * chaining purposes.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const redFruit = $('<div class=\"red-fruit\"></div>');\r\n * $('.apple').wrap(redFruit);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <div class=\"red-fruit\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //     </div>\r\n * //     <li class=\"orange\">Orange</li>\r\n * //     <li class=\"plum\">Plum</li>\r\n * //   </ul>\r\n *\r\n * const healthy = $('<div class=\"healthy\"></div>');\r\n * $('li').wrap(healthy);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <div class=\"healthy\">\r\n * //       <li class=\"apple\">Apple</li>\r\n * //     </div>\r\n * //     <div class=\"healthy\">\r\n * //       <li class=\"orange\">Orange</li>\r\n * //     </div>\r\n * //     <div class=\"healthy\">\r\n * //        <li class=\"plum\">Plum</li>\r\n * //     </div>\r\n * //   </ul>\r\n * ```\r\n *\r\n * @param wrapper - The DOM structure to wrap around each element in the selection.\r\n * @see {@link https://api.jquery.com/wrap/}\r\n */\r\nexports.wrap = _wrap(function (el, elInsertLocation, wrapperDom) {\r\n    var parent = el.parent;\r\n    if (!parent)\r\n        return;\r\n    var siblings = parent.children;\r\n    var index = siblings.indexOf(el);\r\n    parse_1.update([el], elInsertLocation);\r\n    /*\r\n     * The previous operation removed the current element from the `siblings`\r\n     * array, so the `dom` array can be inserted without removing any\r\n     * additional elements.\r\n     */\r\n    uniqueSplice(siblings, index, 0, wrapperDom, parent);\r\n});\r\n/**\r\n * The .wrapInner() function can take any string or object that could be passed\r\n * to the $() factory function to specify a DOM structure. This structure may be\r\n * nested several levels deep, but should contain only one inmost element. The\r\n * structure will be wrapped around the content of each of the elements in the\r\n * set of matched elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const redFruit = $('<div class=\"red-fruit\"></div>');\r\n * $('.apple').wrapInner(redFruit);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <li class=\"apple\">\r\n * //       <div class=\"red-fruit\">Apple</div>\r\n * //     </li>\r\n * //     <li class=\"orange\">Orange</li>\r\n * //     <li class=\"pear\">Pear</li>\r\n * //   </ul>\r\n *\r\n * const healthy = $('<div class=\"healthy\"></div>');\r\n * $('li').wrapInner(healthy);\r\n *\r\n * //=> <ul id=\"fruits\">\r\n * //     <li class=\"apple\">\r\n * //       <div class=\"healthy\">Apple</div>\r\n * //     </li>\r\n * //     <li class=\"orange\">\r\n * //       <div class=\"healthy\">Orange</div>\r\n * //     </li>\r\n * //     <li class=\"pear\">\r\n * //       <div class=\"healthy\">Pear</div>\r\n * //     </li>\r\n * //   </ul>\r\n * ```\r\n *\r\n * @param wrapper - The DOM structure to wrap around the content of each element\r\n *   in the selection.\r\n * @returns The instance itself, for chaining.\r\n * @see {@link https://api.jquery.com/wrapInner/}\r\n */\r\nexports.wrapInner = _wrap(function (el, elInsertLocation, wrapperDom) {\r\n    if (!domhandler_1.hasChildren(el))\r\n        return;\r\n    parse_1.update(el.children, elInsertLocation);\r\n    parse_1.update(wrapperDom, el);\r\n});\r\n/**\r\n * The .unwrap() function, removes the parents of the set of matched elements\r\n * from the DOM, leaving the matched elements in their place.\r\n *\r\n * @category Manipulation\r\n * @example <caption>without selector</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<div id=test>\\n  <div><p>Hello</p></div>\\n  <div><p>World</p></div>\\n</div>'\r\n * );\r\n * $('#test p').unwrap();\r\n *\r\n * //=> <div id=test>\r\n * //     <p>Hello</p>\r\n * //     <p>World</p>\r\n * //   </div>\r\n * ```\r\n *\r\n * @example <caption>with selector</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<div id=test>\\n  <p>Hello</p>\\n  <b><p>World</p></b>\\n</div>'\r\n * );\r\n * $('#test p').unwrap('b');\r\n *\r\n * //=> <div id=test>\r\n * //     <p>Hello</p>\r\n * //     <p>World</p>\r\n * //   </div>\r\n * ```\r\n *\r\n * @param selector - A selector to check the parent element against. If an\r\n *   element's parent does not match the selector, the element won't be unwrapped.\r\n * @returns The instance itself, for chaining.\r\n * @see {@link https://api.jquery.com/unwrap/}\r\n */\r\nfunction unwrap(selector) {\r\n    var _this = this;\r\n    this.parent(selector)\r\n        .not('body')\r\n        .each(function (_, el) {\r\n        _this._make(el).replaceWith(el.children);\r\n    });\r\n    return this;\r\n}\r\nexports.unwrap = unwrap;\r\n/**\r\n * The .wrapAll() function can take any string or object that could be passed to\r\n * the $() function to specify a DOM structure. This structure may be nested\r\n * several levels deep, but should contain only one inmost element. The\r\n * structure will be wrapped around all of the elements in the set of matched\r\n * elements, as a single group.\r\n *\r\n * @category Manipulation\r\n * @example <caption>With markup passed to `wrapAll`</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<div class=\"container\"><div class=\"inner\">First</div><div class=\"inner\">Second</div></div>'\r\n * );\r\n * $('.inner').wrapAll(\"<div class='new'></div>\");\r\n *\r\n * //=> <div class=\"container\">\r\n * //     <div class='new'>\r\n * //       <div class=\"inner\">First</div>\r\n * //       <div class=\"inner\">Second</div>\r\n * //     </div>\r\n * //   </div>\r\n * ```\r\n *\r\n * @example <caption>With an existing cheerio instance</caption>\r\n *\r\n * ```js\r\n * const $ = cheerio.load(\r\n *   '<span>Span 1</span><strong>Strong</strong><span>Span 2</span>'\r\n * );\r\n * const wrap = $('<div><p><em><b></b></em></p></div>');\r\n * $('span').wrapAll(wrap);\r\n *\r\n * //=> <div>\r\n * //     <p>\r\n * //       <em>\r\n * //         <b>\r\n * //           <span>Span 1</span>\r\n * //           <span>Span 2</span>\r\n * //         </b>\r\n * //       </em>\r\n * //     </p>\r\n * //   </div>\r\n * //   <strong>Strong</strong>\r\n * ```\r\n *\r\n * @param wrapper - The DOM structure to wrap around all matched elements in the\r\n *   selection.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/wrapAll/}\r\n */\r\nfunction wrapAll(wrapper) {\r\n    var el = this[0];\r\n    if (el) {\r\n        var wrap_2 = this._make(typeof wrapper === 'function' ? wrapper.call(el, 0, el) : wrapper).insertBefore(el);\r\n        // If html is given as wrapper, wrap may contain text elements\r\n        var elInsertLocation = void 0;\r\n        for (var i = 0; i < wrap_2.length; i++) {\r\n            if (wrap_2[i].type === 'tag')\r\n                elInsertLocation = wrap_2[i];\r\n        }\r\n        var j = 0;\r\n        /*\r\n         * Find the deepest child. Only consider the first tag child of each node\r\n         * (ignore text); stop if no children are found.\r\n         */\r\n        while (elInsertLocation && j < elInsertLocation.children.length) {\r\n            var child = elInsertLocation.children[j];\r\n            if (child.type === 'tag') {\r\n                elInsertLocation = child;\r\n                j = 0;\r\n            }\r\n            else {\r\n                j++;\r\n            }\r\n        }\r\n        if (elInsertLocation)\r\n            this._make(elInsertLocation).append(this);\r\n    }\r\n    return this;\r\n}\r\nexports.wrapAll = wrapAll;\r\n/* eslint-disable jsdoc/check-param-names*/\r\n/**\r\n * Insert content next to each element in the set of matched elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('.apple').after('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param content - HTML string, DOM element, array of DOM elements or Cheerio\r\n *   to insert after each element in the set of matched elements.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/after/}\r\n */\r\nfunction after() {\r\n    var _this = this;\r\n    var elems = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        elems[_i] = arguments[_i];\r\n    }\r\n    var lastIdx = this.length - 1;\r\n    return utils_1.domEach(this, function (el, i) {\r\n        var parent = el.parent;\r\n        if (!htmlparser2_1.DomUtils.hasChildren(el) || !parent) {\r\n            return;\r\n        }\r\n        var siblings = parent.children;\r\n        var index = siblings.indexOf(el);\r\n        // If not found, move on\r\n        /* istanbul ignore next */\r\n        if (index < 0)\r\n            return;\r\n        var domSrc = typeof elems[0] === 'function'\r\n            ? elems[0].call(el, i, static_1.html(el.children))\r\n            : elems;\r\n        var dom = _this._makeDomArray(domSrc, i < lastIdx);\r\n        // Add element after `this` element\r\n        uniqueSplice(siblings, index + 1, 0, dom, parent);\r\n    });\r\n}\r\nexports.after = after;\r\n/* eslint-enable jsdoc/check-param-names*/\r\n/**\r\n * Insert every element in the set of matched elements after the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').insertAfter('.apple');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to insert elements after.\r\n * @returns The set of newly inserted elements.\r\n * @see {@link https://api.jquery.com/insertAfter/}\r\n */\r\nfunction insertAfter(target) {\r\n    var _this = this;\r\n    if (typeof target === 'string') {\r\n        target = this._make(target);\r\n    }\r\n    this.remove();\r\n    var clones = [];\r\n    this._makeDomArray(target).forEach(function (el) {\r\n        var clonedSelf = _this.clone().toArray();\r\n        var parent = el.parent;\r\n        if (!parent) {\r\n            return;\r\n        }\r\n        var siblings = parent.children;\r\n        var index = siblings.indexOf(el);\r\n        // If not found, move on\r\n        /* istanbul ignore next */\r\n        if (index < 0)\r\n            return;\r\n        // Add cloned `this` element(s) after target element\r\n        uniqueSplice(siblings, index + 1, 0, clonedSelf, parent);\r\n        clones.push.apply(clones, clonedSelf);\r\n    });\r\n    return this._make(clones);\r\n}\r\nexports.insertAfter = insertAfter;\r\n/* eslint-disable jsdoc/check-param-names*/\r\n/**\r\n * Insert content previous to each element in the set of matched elements.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('.apple').before('<li class=\"plum\">Plum</li>');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param content - HTML string, DOM element, array of DOM elements or Cheerio\r\n *   to insert before each element in the set of matched elements.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/before/}\r\n */\r\nfunction before() {\r\n    var _this = this;\r\n    var elems = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        elems[_i] = arguments[_i];\r\n    }\r\n    var lastIdx = this.length - 1;\r\n    return utils_1.domEach(this, function (el, i) {\r\n        var parent = el.parent;\r\n        if (!htmlparser2_1.DomUtils.hasChildren(el) || !parent) {\r\n            return;\r\n        }\r\n        var siblings = parent.children;\r\n        var index = siblings.indexOf(el);\r\n        // If not found, move on\r\n        /* istanbul ignore next */\r\n        if (index < 0)\r\n            return;\r\n        var domSrc = typeof elems[0] === 'function'\r\n            ? elems[0].call(el, i, static_1.html(el.children))\r\n            : elems;\r\n        var dom = _this._makeDomArray(domSrc, i < lastIdx);\r\n        // Add element before `el` element\r\n        uniqueSplice(siblings, index, 0, dom, parent);\r\n    });\r\n}\r\nexports.before = before;\r\n/* eslint-enable jsdoc/check-param-names*/\r\n/**\r\n * Insert every element in the set of matched elements before the target.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('<li class=\"plum\">Plum</li>').insertBefore('.apple');\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"plum\">Plum</li>\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //      <li class=\"pear\">Pear</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param target - Element to insert elements before.\r\n * @returns The set of newly inserted elements.\r\n * @see {@link https://api.jquery.com/insertBefore/}\r\n */\r\nfunction insertBefore(target) {\r\n    var _this = this;\r\n    var targetArr = this._make(target);\r\n    this.remove();\r\n    var clones = [];\r\n    utils_1.domEach(targetArr, function (el) {\r\n        var clonedSelf = _this.clone().toArray();\r\n        var parent = el.parent;\r\n        if (!parent) {\r\n            return;\r\n        }\r\n        var siblings = parent.children;\r\n        var index = siblings.indexOf(el);\r\n        // If not found, move on\r\n        /* istanbul ignore next */\r\n        if (index < 0)\r\n            return;\r\n        // Add cloned `this` element(s) after target element\r\n        uniqueSplice(siblings, index, 0, clonedSelf, parent);\r\n        clones.push.apply(clones, clonedSelf);\r\n    });\r\n    return this._make(clones);\r\n}\r\nexports.insertBefore = insertBefore;\r\n/**\r\n * Removes the set of matched elements from the DOM and all their children.\r\n * `selector` filters the set of matched elements to be removed.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('.pear').remove();\r\n * $.html();\r\n * //=>  <ul id=\"fruits\">\r\n * //      <li class=\"apple\">Apple</li>\r\n * //      <li class=\"orange\">Orange</li>\r\n * //    </ul>\r\n * ```\r\n *\r\n * @param selector - Optional selector for elements to remove.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/remove/}\r\n */\r\nfunction remove(selector) {\r\n    // Filter if we have selector\r\n    var elems = selector ? this.filter(selector) : this;\r\n    utils_1.domEach(elems, function (el) {\r\n        htmlparser2_1.DomUtils.removeElement(el);\r\n        el.prev = el.next = el.parent = null;\r\n    });\r\n    return this;\r\n}\r\nexports.remove = remove;\r\n/**\r\n * Replaces matched elements with `content`.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const plum = $('<li class=\"plum\">Plum</li>');\r\n * $('.pear').replaceWith(plum);\r\n * $.html();\r\n * //=> <ul id=\"fruits\">\r\n * //     <li class=\"apple\">Apple</li>\r\n * //     <li class=\"orange\">Orange</li>\r\n * //     <li class=\"plum\">Plum</li>\r\n * //   </ul>\r\n * ```\r\n *\r\n * @param content - Replacement for matched elements.\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/replaceWith/}\r\n */\r\nfunction replaceWith(content) {\r\n    var _this = this;\r\n    return utils_1.domEach(this, function (el, i) {\r\n        var parent = el.parent;\r\n        if (!parent) {\r\n            return;\r\n        }\r\n        var siblings = parent.children;\r\n        var cont = typeof content === 'function' ? content.call(el, i, el) : content;\r\n        var dom = _this._makeDomArray(cont);\r\n        /*\r\n         * In the case that `dom` contains nodes that already exist in other\r\n         * structures, ensure those nodes are properly removed.\r\n         */\r\n        parse_1.update(dom, null);\r\n        var index = siblings.indexOf(el);\r\n        // Completely remove old element\r\n        uniqueSplice(siblings, index, 1, dom, parent);\r\n        if (!dom.includes(el)) {\r\n            el.parent = el.prev = el.next = null;\r\n        }\r\n    });\r\n}\r\nexports.replaceWith = replaceWith;\r\n/**\r\n * Empties an element, removing all its children.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * $('ul').empty();\r\n * $.html();\r\n * //=>  <ul id=\"fruits\"></ul>\r\n * ```\r\n *\r\n * @returns The instance itself.\r\n * @see {@link https://api.jquery.com/empty/}\r\n */\r\nfunction empty() {\r\n    return utils_1.domEach(this, function (el) {\r\n        if (!htmlparser2_1.DomUtils.hasChildren(el))\r\n            return;\r\n        el.children.forEach(function (child) {\r\n            child.next = child.prev = child.parent = null;\r\n        });\r\n        el.children.length = 0;\r\n    });\r\n}\r\nexports.empty = empty;\r\nfunction html(str) {\r\n    if (str === undefined) {\r\n        var el = this[0];\r\n        if (!el || !htmlparser2_1.DomUtils.hasChildren(el))\r\n            return null;\r\n        return static_1.html(el.children, this.options);\r\n    }\r\n    // Keep main options unchanged\r\n    var opts = tslib_1.__assign(tslib_1.__assign({}, this.options), { context: null });\r\n    return utils_1.domEach(this, function (el) {\r\n        if (!htmlparser2_1.DomUtils.hasChildren(el))\r\n            return;\r\n        el.children.forEach(function (child) {\r\n            child.next = child.prev = child.parent = null;\r\n        });\r\n        opts.context = el;\r\n        var content = utils_1.isCheerio(str)\r\n            ? str.toArray()\r\n            : parse_1.default(\"\" + str, opts, false).children;\r\n        parse_1.update(content, el);\r\n    });\r\n}\r\nexports.html = html;\r\n/**\r\n * Turns the collection to a string. Alias for `.html()`.\r\n *\r\n * @category Manipulation\r\n * @returns The rendered document.\r\n */\r\nfunction toString() {\r\n    return static_1.html(this, this.options);\r\n}\r\nexports.toString = toString;\r\nfunction text(str) {\r\n    var _this = this;\r\n    // If `str` is undefined, act as a \"getter\"\r\n    if (str === undefined) {\r\n        return static_1.text(this);\r\n    }\r\n    if (typeof str === 'function') {\r\n        // Function support\r\n        return utils_1.domEach(this, function (el, i) {\r\n            text.call(_this._make(el), str.call(el, i, static_1.text([el])));\r\n        });\r\n    }\r\n    // Append text node to each selected elements\r\n    return utils_1.domEach(this, function (el) {\r\n        if (!htmlparser2_1.DomUtils.hasChildren(el))\r\n            return;\r\n        el.children.forEach(function (child) {\r\n            child.next = child.prev = child.parent = null;\r\n        });\r\n        var textNode = new domhandler_2.Text(str);\r\n        parse_1.update(textNode, el);\r\n    });\r\n}\r\nexports.text = text;\r\n/**\r\n * Clone the cheerio object.\r\n *\r\n * @category Manipulation\r\n * @example\r\n *\r\n * ```js\r\n * const moreFruit = $('#fruits').clone();\r\n * ```\r\n *\r\n * @returns The cloned object.\r\n * @see {@link https://api.jquery.com/clone/}\r\n */\r\nfunction clone() {\r\n    return this._make(utils_1.cloneDom(this.get()));\r\n}\r\nexports.clone = clone;\r\n"]},"metadata":{},"sourceType":"script"}